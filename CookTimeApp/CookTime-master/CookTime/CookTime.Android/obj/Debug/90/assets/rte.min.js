!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}({2:function(e,t,n){"use strict";n.r(t);var r=!1;function i(e,t){var n=t;return n.unshift(void 0),new(Function.prototype.bind.apply(e,n))}function o(e,t){for(var n=t,r=e.replace(/\[/g,".").replace(/\]/g,"").split("."),i=0;i<r.length&&!p(n);i++)n=n[r[i]];return n}function a(e,t,n){var r,i,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=n||{},s=a,l=o.length;for(r=0;r<l;r++)i=o[r],r+1===l?s[i]=void 0===t?{}:t:h(s[i])&&(s[i]={}),s=s[i];return a}function s(e){return!h(e)&&e.constructor==={}.constructor}function l(e,t){return e[t]}function d(e,t){if(!h(t))for(var n=e,r=t,i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];h(n.deepMerge)||-1===n.deepMerge.indexOf(a)||!s(r[a])&&!Array.isArray(r[a])?n[a]=r[a]:c(n[a],n[a],r[a],!0)}}function c(e,t,n,r){var i=e&&"object"==typeof e?e:{},o=arguments.length;r&&(o-=1);for(var a=function(e){if(!l[e])return"continue";var t=l[e];Object.keys(t).forEach((function(e){var n,o=i[e],a=t[e],l=Array.isArray(a)&&Array.isArray(o)&&a.length!==o.length,d=!g()||!(o instanceof Event||l);r&&d&&(s(a)||Array.isArray(a))?s(a)?(n=o||{},Array.isArray(n)&&n.hasOwnProperty("isComplexArray")?c(n,{},a,r):i[e]=c(n,{},a,r)):(n=g()?o&&Object.keys(a).length:o||[],i[e]=c([],n,a,r)):i[e]=a}))},l=arguments,d=1;d<o;d++)a(d);return i}function h(e){return null==e}function p(e){return void 0===e}function u(e,t){var n;return function(){var r=this,i=arguments,o=function(){return n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(o,t)}}function m(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function f(e){var t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"}function g(){return r}var y=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,n,r,i,o){var a,s=e.addOrGetEventData(t);a=o?u(r,o):r,i&&(a=a.bind(i));for(var l=n.split(" "),d=0;d<l.length;d++)s.push({name:l[d],listener:r,debounce:a}),t.addEventListener(l[d],a,{passive:!1});return a},e.remove=function(t,n,r){for(var i=e.addOrGetEventData(t),o=n.split(" "),a=function(e){var n,a=-1;i&&0!==i.length&&i.some((function(t,i){return t.name===o[e]&&t.listener===r&&(a=i,n=t.debounce,!0)})),-1!==a&&i.splice(a,1),n&&t.removeEventListener(o[e],n)},s=0;s<o.length;s++)a(s)},e.clearEvents=function(t){var n,r;r=c([],r,n=e.addOrGetEventData(t));for(var i=0;i<r.length;i++)t.removeEventListener(r[i].name,r[i].debounce),n.shift()},e.trigger=function(t,n,r){for(var i=0,o=e.addOrGetEventData(t);i<o.length;i++){var a=o[i];a.name===n&&a.debounce.call(this,r)}},e}(),v=new RegExp("\\n|\\r|\\s\\s+","g"),b=new RegExp(/'|"/g),C=new RegExp("if ?\\("),N=new RegExp("else if ?\\("),E=new RegExp("else"),M=new RegExp("for ?\\("),S=new RegExp("(/if|/for)"),w=new RegExp("\\((.*)\\)",""),x=new RegExp("^[0-9]+$","g"),T=new RegExp("[\\w\"'.\\s+]+","g"),L=new RegExp('"(.*?)"',"g"),k=new RegExp("[\\w\"'@#$.\\s+]+","g"),D=new RegExp("\\${([^}]*)}","g"),O=/^\..*/gm,P=/\\/gi,R=/\\\\/gi,A=new RegExp("[\\w\"'@#$.\\s+]+","g"),H=/\window\./gm;function I(e,t){var n=function(e,t,n){var r=0,i=[],o=e.match(/class="([^\"]+|)\s{2}/g),a="";o&&o.forEach((function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}));return e.replace(v,"").replace(L,"'$1'").replace(D,(function(e,o,a,s){var l=o.match(w);if(l){var d=l[1];if(N.test(o))o='";} '+o.replace(l[1],d.replace(T,(function(e){return B(e=e.trim(),!b.test(e)&&-1===i.indexOf(e),t,i)})))+'{ \n str = str + "';else if(C.test(o))o='"; '+o.replace(l[1],d.replace(k,(function(e){return z(e,t,i)})))+'{ \n str = str + "';else if(M.test(o)){var c=l[1].split(" of ");o='"; '+o.replace(l[1],(function(e){return i.push(c[0]),i.push(c[0]+"Index"),"var i"+(r+=1)+"=0; i"+r+" < "+B(c[1],!0,t,i)+".length; i"+r+"++"}))+"{ \n "+c[0]+"= "+B(c[1],!0,t,i)+"[i"+r+"]; \n var "+c[0]+"Index=i"+r+'; \n str = str + "'}else{var h=o.split("("),p=n&&n.hasOwnProperty(h[0])?"this.":"global";p=/\./.test(h[0])?"":p;var u=l[1].split(",");0===l[1].length||/data/.test(u[0])||/window./.test(u[0])||(l[1]="global"===p?t+"."+l[1]:l[1]);if(H.test(o)&&/\]\./gm.test(o)||/\@|\$|\#/gm.test(o)){/\@|\$|\#|\]\./gm.test(o)&&(o='"+ '+("global"===p?"":p)+o.replace(l[1],d.replace(A,(function(e){return z(e,t,i)})))+'+ "')}else o='" + '+("global"===p?"":p)+o.replace(d,B(l[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==p,t,i))+'+"'}}else E.test(o)?o='"; '+o.replace(E,'} else { \n str = str + "'):o.match(S)?o=o.replace(S,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(o)?(o.match(P)&&(o=F(o)),o='"+'+j(o,-1===i.indexOf(o),t,i)+'"]+"'):o=o.match(P)?'"+'+j(o=F(o),-1===i.indexOf(o),t,i)+'"]+"':'"+'+B(o.replace(/\,/gi,"+"+t+"."),-1===i.indexOf(o),t,i)+'+"';return o}))}(e,"data",t);return new Function("data",'var str="'+n+'"; return str;').bind(t)}function B(e,t,n,r){return t&&!x.test(e)&&-1===r.indexOf(e.split(".")[0])?n+"."+e:e}function j(e,t,n,r){return t&&!x.test(e)&&-1===r.indexOf(e.split(".")[0])?n+'["'+e:e}function F(e){return e=e.match(R)?e:e.replace(P,"\\\\")}function z(e,t,n){e=e.trim();if(/\window\./gm.test(e))return e;var r=/'|"/gm;return/\@|\$|\#/gm.test(e)&&(e=j(e,-1===n.indexOf(e),t,n)+'"]'),O.test(e)?function(e,t,n,r){return!t||x.test(e)||-1!==r.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:n+"."+e}(e,!r.test(e)&&-1===n.indexOf(e),t,n):B(e,!r.test(e)&&-1===n.indexOf(e),t,n)}var _=/^[\n\r.]+\<tr|^\<tr/,q=/^[\n\r.]+\<svg|^\<path|^\<g/,G={};function U(){return"-"+Math.random().toString(36).substr(2,5)}var V,W={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),I(e,t)},e}())).compile},K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,X=/^(\.|#)/,$={".":"className","#":"id"},Y={className:"attributes.className",id:"attributes.id",tagName:"tagName"},Z=["area","base","basefont","br","col","frame","hr","img","input","link","meta","param","embed","command","keygen","source","track","wbr"],Q=["a","address","article","applet","aside","audio","blockquote","button","canvas","center","dd","del","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","ins","isindex","li","map","menu","noframes","noscript","object","ol","output","p","pre","section","script","table","tbody","td","tfoot","th","thead","tr","ul","video"],ee=["abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"],te=["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"],ne=["checked","compact","declare","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","readonly","selected"],re=["Script","style"],ie={tabindex:"tabIndex"},oe=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,ae=/^<\/([-A-Za-z0-9_]+)[^>]*>/,se=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;!function(e){function t(e,t){t&&e&&e.forEach((function(e){return s(e)&&(e.parent&&n(e),e.parent=t),e}))}function n(e){var t=e.parent;if(t){var n=t.children.indexOf(e);-1!==n&&t.children.splice(n)}return t}function r(e,t){var n=e.match(X),r={};if(n){var i=$[n[0]];if("className"===i){var o=t.filter((function(e){return e.hasOwnProperty("className")}))[0],a=!1;o||(a=!0,o={});var s=o[i]||"";o[i]=s+"(?=.*?\\b{value}\\b)".replace("{value}",e.replace(".","")),a&&t.push(o)}else r[i]=e.replace(n[0],""),t.push(r)}else t.push({tagName:e})}function i(e,t,n,r){if(e.children){var a=e.children.filter((function(e){if("string"!=typeof e){for(var n=!0,r=0,i=t;r<i.length;r++){var a=i[r],s=Object.keys(a)[0],l=a[s],d=o(Y[s],e);if("className"===s){if(!new RegExp("^"+l+".*$").test(d)){n=!1;break}}else if(d!==l){n=!1;break}}return n}return!1}));return r||a.length&&!n||e.children.forEach((function(e){s(e)&&(a=a.concat(i(e,t,n)))})),a}return[]}function a(e){for(var t,n=[],r=[],i=[];e;){t=!0;var o=l(r);if(o&&d(re,o))e=e.replace(new RegExp("([\\s\\S]*?)</"+l(i)+"[^>]*>"),(function(e,t){return u(t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2")),""})),p("",l(r));else{if(0===e.indexOf("</"))(a=e.match(ae))&&(e=e.substring(a[0].length),a[0].replace(ae,p)),t=!1;else if(0===e.indexOf("<")){var a;(a=e.match(oe))&&(e=e.substring(a[0].length),a[0].replace(oe,h)),t=!1}if(t){var s=e.indexOf("<"),c=s<0?e:e.substring(0,s);e=s<0?"":e.substring(s),u(c)}}e}function h(e,t,o){if(t=t.toLowerCase(),d(Q,t))for(;l(r)&&d(ee,l(r));)p("",l(r));d(te,t)&&l(r)&&p("",t);var a=d(Z,t);a||r.push(t);var s={};o.replace(se,(function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[2]?n[2]:n[3]?n[3]:n[4]?n[4]:d(ne,t)?t:"";if("style"===t){for(var o=i.split(";"),a={},l=0,c=o.length;l<c;l++){var h=o[l],p=h.split(":");a[p[0]]=p[1]}i=a}s[t=ie[t]||t]=i})),s["data-id"]=U();var c={tagName:t,attributes:s};if(a){var h=i[0]||n;void 0===h.children&&(h.children=[]),c.parent=h,h.children.push(c)}else i.unshift(c)}function p(e,t){var o;if(t)for(o=r.length-1;o>=0&&r[o]!==t;o--);else o=0;if(o>=0){for(var a=i.length-1;a>=o;a--){var s=i.shift();if(0===i.length)n.push(s);else{var l=i[0];void 0===l.children&&(l.children=[]),s.parent=l,l.children.push(s)}}r.length=o}}function u(e){if(0===i.length)n.push(e);else{var t=i[0];void 0===t.children&&(t.children=[]),t.children.push(e)}}return n}function l(e){return e[e.length-1]}function d(e,t){return-1!==e.indexOf(t)}e.createElement=function(e,t){var n=[],r=c({},{},t,!0);if(!h(t)&&Object.keys(t).length&&(r.innerHTML&&(n=a(r.innerHTML),delete r.innerHTML),r.attrs&&(c(r,r.attrs),delete r.attrs),r.styles)){for(var i=r.styles.split(";"),o={},s=0,l=i.length;s<l;s++){var d=i[s].split(":");o[d[0]]=d[1]}delete r.styles,r.style=o}return{tagName:e,attributes:r||{},children:n}},e.assignParent=t,e.append=function(e,n){t(e,n),n.children?n.children=n.children.concat(e):n.children=[].concat(e)},e.prepend=function(e,n){if(t(e,n),n.children&&n.children.length)for(var r=e.length-1;r>=0;r--)n.children.unshift(e[r]);else n.children=[],n.children.concat(e)},e.detach=n,e.vDomSelector=function e(t){for(var n=t.ele,o=t.selector,a=t.selectAll,s=t.immediateParent,l=o.split(" "),d=n,c=0,h=l.length;c<h;c++){var p=!1,u=d,m=l[c],f=[];if(K.test(m))!0,r(m,f);else if(-1===m.indexOf(">"))for(var g=0,y=m.match(J);g<y.length;g++){r(y[g],f)}else if(-1!==m.indexOf(">")){p=!0;for(var v=n,b=void 0,C=0,N=0,E=m.split(">");N<E.length;N++){var M=E[N];if(!v)break;if(v.length){for(var S=[],w=0,x=v;w<x.length;w++){var T=x[w];S=S.concat(e({ele:T,selector:M,selectAll:a,immediateParent:!!C}))}b=S}else b=e({ele:v,selector:M,selectAll:a,immediateParent:!!C});C++,v=b}b&&(d=b)}if(!p)if(u.length){for(var L=[],k=0,D=u;k<D.length;k++){var O=D[k];L=L.concat(i(O,f,a,s))}d=L}else d=i(u,f,a,s)}return a?d:d[0]||null},e.accessElement=i,e.ConvertHTMLToJSon=a,e.cloneNode=function(e,t){return s(e)?t?c({},{},e,!0):{tagName:e.tagName,attributes:e.attributes}:e.cloneNode(t)},e.setStyleAttribute=function(e,t){e.attributes.style?e.attributes.style=c({},t):e.attributes.style=c(e.attributes.style,t)}}(V||(V={}));var le=/^svg|^path|^g/;function de(e,t){var n=le.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(n.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(n.className=t.className),void 0!==t.id&&(n.id=t.id),void 0!==t.styles&&n.setAttribute("style",t.styles),void 0!==t.attrs&&ye(n,t.attrs)),n}function ce(e,t){for(var n=pe(t),r=0,i=e;r<i.length;r++)for(var l=i[r],d=0,c=n;d<c.length;d++){var p=c[d];if(s(l)){var u=o("attributes.className",l);h(u)?a("attributes.className",p,l):new RegExp("\\b"+p+"\\b","i").test(u)||a("attributes.className",u+" "+p,l)}else l.classList.contains(p)||l.classList.add(p)}return e}function he(e,t){for(var n=pe(t),r=0,i=e;r<i.length;r++){var l=i[r],d=s(l);if(d?o("attributes.className",l):""!==l.className)for(var c=0,h=n;c<h.length;c++){var p=h[c];if(d){var u=o("attributes.className",l).split(" "),m=u.indexOf(p);-1!==m&&u.splice(m,1),a("attributes.className",u.join(" "),l)}else l.classList.remove(p)}}return e}function pe(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function ue(e,t,n){if(s(t))V.prepend(e,t);else{for(var r=document.createDocumentFragment(),i=0,o=e;i<o.length;i++){var a=o[i];r.appendChild(a)}t.insertBefore(r,t.firstElementChild),n&&fe(t)}return e}function me(e,t,n){if(s(t))V.append(e,t);else{for(var r=document.createDocumentFragment(),i=0,o=e;i<o.length;i++){var a=o[i];r.appendChild(a)}t.appendChild(r),n&&fe(t)}return e}function fe(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),ge(t)}))}function ge(e){return s(e)?V.detach(e):e.parentNode.removeChild(e)}function ye(e,t){for(var n=e,r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];if(s(n)){var a=o;"tabindex"===o&&(a="tabIndex"),n.attributes[a]=t[o]}else n.setAttribute(o,t[o])}return n}function ve(e,t,n){return void 0===t&&(t=document),s(t)&&n?V.vDomSelector({ele:t,selector:e,selectAll:!1}):t.querySelector(e)}function be(e,t,n){return void 0===t&&(t=document),s(t)&&!n?V.vDomSelector({ele:t,selector:e,selectAll:!0}):t.querySelectorAll(e)}function Ce(e,t){var n=e;if("function"==typeof n.closest)return n.closest(t);for(;n&&1===n.nodeType;){if(Ee(n,t))return n;n=n.parentNode}return null}function Ne(e,t){void 0!==t&&(s(e)?V.setStyleAttribute(e,t):Object.keys(t).forEach((function(n){e.style[n]=t[n]})))}function Ee(e,t){var n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return n?n.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var Me=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,Se=/msie|trident/i,we=/Trident\/7\./,xe=/(ipad|iphone|ipod touch)/i,Te=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,Le=/android/i,ke=/trident|windows phone|edge/i,De=/(version)[ \/]([\w.]+)/i,Oe={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var Pe=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},n=[],r=0,i=Object.keys(Oe);r<i.length;r++){var o=i[r];if(n=e.userAgent.match(Oe[o])){if(t.name="opr"===n[1].toLowerCase()?"opera":n[1].toLowerCase(),t.name="crios"===n[1].toLowerCase()?"chrome":t.name,t.version=n[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(we)){t.name="msie";break}var a=e.userAgent.match(De);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var n={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?n[t].isPointer:e.isTouch?n[t].isTouch+(e.isDevice?"":" "+n[t].isDevice):n[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,n){var r=window.browserDetails;return void 0===r[t]?r[t]=n.test(e.userAgent):r[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return p(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",Se)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return p(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return p(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return p(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",Me)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",xe)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",Te)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",Le)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return p(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(p(window.cordova)&&p(window.PhoneGap)&&p(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",ke)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return p(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return p(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return p(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return p(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}();function Re(e,t,n,r){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof r||(e.properties[t]=i(r,[e,t,n])),e.properties[t]}function Ae(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function He(e,t){return function(n){if(this.properties[t]!==n){var r=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,n,r),this.properties[t]=n}}}function Ie(e,t,n){return function(){return Re(this,t,e,n)}}function Be(e,t,n){return function(r){Re(this,t,e,n).setProperties(r)}}function je(e){return function(t,n){var r={set:He(e,n),get:Ae(e,n),enumerable:!0,configurable:!0};Object.defineProperty(t,n,r),qe(t,n,"prop",e)}}function Fe(e,t){return function(n,r){var i={set:Be(e,r,t),get:Ie(e,r,t),enumerable:!0,configurable:!0};Object.defineProperty(n,r,i),qe(n,r,"complexProp",e,t)}}function ze(){return function(e,t){var n={set:function(e){var n=this.properties[t];if(n!==e){var r=function e(t,n){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:n};var r=o("propName",t);return r&&(n=r+"-"+n),e(o("parentObj",t),n)}(this,t);!1===p(n)&&r.context.removeEventListener(r.prefix,n),r.context.addEventListener(r.prefix,e),this.properties[t]=e}},get:Ae(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,n),qe(e,t,"event")}}function _e(e){}function qe(e,t,n,r,i){p(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[n+"s"].push({propertyName:t,defaultValue:r,type:i}),e.propList[n+"Names"].push(t)}var Ge=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var n=e.length;if(0!==n){this.loadedModules.length&&this.clearUnusedModule(e);for(var r=0;r<n;r++)for(var o=e[r],s=0,l=t;s<l.length;s++){var d=l[s],c=o.member;if(d.prototype.getModuleName()===o.member&&!this.isModuleLoaded(c)){var h=i(d,o.args),p=this.getMemberName(c);o.isProperty?a(p,d,this.parent):a(p,h,this.parent);var u=o;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var n=t[e];n.isProperty||o(n.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t,n,r=this,i=e.map((function(e){return r.getMemberName(e.member)})),a=0,s=this.loadedModules.filter((function(e){return-1===i.indexOf(e.member)}));a<s.length;a++){var l=s[a];l.isProperty||o(l.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(l),1),t=this.parent,n=l.member,delete t[n]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,n=this.loadedModules;t<n.length;t++){if(n[t].member===this.getMemberName(e))return!0}return!1},e}(),Ue=function(){function e(e){this.ranArray=[],this.boundedEvents={},h(e)||(this.context=e)}return e.prototype.on=function(e,t,n,r){if(!h(t)){var i=n||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:i}]:h(r)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:i}):-1===this.ranArray.indexOf(r)&&(this.ranArray.push(r),this.boundedEvents[e].push({handler:t,context:i,id:r}))}},e.prototype.off=function(e,t,n){if(!this.notExist(e)){var r=o(e,this.boundedEvents);if(t){for(var i=0;i<r.length;i++)if(n){if(r[i].id===n){r.splice(i,1);var a=this.ranArray.indexOf(n);-1!==a&&this.ranArray.splice(a,1);break}}else if(t===r[i].handler){r.splice(i,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t,n,r){if(this.notExist(e))n&&n.call(this,t);else{t&&(t.name=e);var i=o(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(i,t,n,r,0);for(var a=0,s=i;a<s.length;a++){var l=s[a];l.handler.call(l.context,t)}n&&n.call(this,t)}},e.prototype.blazorCallback=function(e,t,n,r,i){var o=this,a=i===e.length-1;if(i<e.length){var s=e[i],l=s.handler.call(s.context,t);if(l&&"function"==typeof l.then){if(!n)return l;l.then((function(l){if(l="string"==typeof l&&o.isJson(l)?JSON.parse(l):l,c(t,t,l,!0),!n||!a)return o.blazorCallback(e,t,n,r,i+1);n.call(s.context,t)})).catch((function(e){r&&r.call(s.context,"string"==typeof e&&o.isJson(e)?JSON.parse(e):e)}))}else{if(!n||!a)return this.blazorCallback(e,t,n,r,i+1);n.call(s.context,t)}}},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var n=0,r=e;n<r.length;n++){if(r[n].handler===t)return!0}return!1},e}(),Ve=new RegExp("]"),We=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new Ue(this),p(t)||(this.element="string"==typeof t?document.querySelector(t):t,h(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),p(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var n=this.isProtectedOnChange;this.isProtectedOnChange=!!t,d(this,e),!0!==t?(d(this.changedProperties,e),this.dataBind()):g()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=n},e.callChildDataBind=function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t[i]instanceof Array)for(var o=0,a=t[i];o<a.length;o++){var s=a[o];void 0!==s.dataBind&&s.dataBind()}else t[i].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,n=this.changedProperties,r=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(n,r),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(g()&&(e=e||{},c(this.bulkChanges,{},e,!0),this.allowServerDataBinding)){window.sfBlazor.updateModel(this),this.bulkChanges={}}},e.prototype.saveChanges=function(e,t,n){if(g()){var r={};r[e]=t,this.serverDataBind(r)}this.isProtectedOnChange||(this.oldProperties[e]=n,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,n=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(n);var r="ej2"+function(e){for(var t="",n=0;n<5;n++)t+=(n?",":"")+e[n];return t}(n),i=function(n){n.source===window&&"string"==typeof n.data&&n.data.length<=32&&n.data===r&&(e(),t())};return window.addEventListener("message",i,!1),window.postMessage(r,"*"),t=function(){window.removeEventListener("message",i),e=i=r=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,n,r){var i=this;if(!0!==this.isDestroyed){var a=this.isProtectedOnChange;this.isProtectedOnChange=!1;var s=this.modelObserver.notify(e,t,n,r);if(Ve.test(e)){var l=o(e,this);if(l){if(window.Blazor){var d=l.call(this,t);d&&"function"==typeof d.then?n?d.then((function(e){n&&(e="string"==typeof e&&i.modelObserver.isJson(e)?JSON.parse(e):e,n.call(i,e))})).catch((function(e){r&&(e="string"==typeof e&&i.modelObserver.isJson(e)?JSON.parse(e):e,r.call(i,e))})):s=d:n&&n.call(this,t)}else l.call(this,t),n&&n.call(this,t)}else n&&n.call(this,t)}return this.isProtectedOnChange=a,s}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();ce([this.element],["e-lib",e]),h(this.element.ej2_instances)?a("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),he([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&he([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();var Ke,Je,Xe=function(){function e(e,t,n,r){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=o("callChildDataBind",We),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=r,this.setProperties(n,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(d(this,e),this.updateChange(!1,this.propName),this.clearChanges()):d(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(a(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),a(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,n,r){this.controlParent.isProtectedOnChange||(r||this.serverDataBind(e,t,!0),this.oldProperties[e]=n,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,n,r){if(g()&&!this.parentObj.isComplexArraySetter){var i,o={},a=n?this.getParentKey(!0)+"."+e:e;if(-1!==a.indexOf(".")){var s=a.split(".");i=o;for(var l=0;l<s.length;l++){var d=l===s.length-1;i[s[l]]=d?t:{},i=d?i:i[s[l]]}}else o[a]={},i=o[a],o[a][e]=t;if(this.isParentArray){i.ejsAction=r||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",n=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var r=this.parentObj[this.propName].length;r=e?r:r>0?r-1:0,n+=t=-1!==t?"-"+t:"-"+r}return this.controlParent!==this.parentObj&&(n=this.parentObj.getParentKey()+"."+this.propName+t),n},e}(),$e={latn:{_digits:"0123456789",_type:"numeric"}},Ye={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},Ze=[0,1,2,3,4,5,6,7,8,9],Qe=function(){function e(){}return e.getMainObject=function(e,t){return o(g()?t:"main."+t,e)},e.getNumberingSystem=function(e){return o("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var n={},r=0,i=t||Object.keys(e);r<i.length;r++){var o=i[r];n.hasOwnProperty(e[o])||(n[e[o]]=o)}return n},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},n=0,r=Object.keys(Ye);n<r.length;n++){var i=r[n];t[e[i]]=Ye[i]}return t},e.constructRegex=function(e){for(var t=e.length,n="",r=0;r<t;r++)n+=r!==t-1?e[r]+"|":e[r];return n},e.convertValueParts=function(e,t,n){return e.replace(t,(function(e){return n[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=o("numbers",e),t.nSystem=o("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,n,r){var i={},a=this.getDefaultNumberingSystem(e);if(!p(a.nSystem)||r){var s=r?o("obj.mapperDigits",a):o(a.nSystem+"._digits",t);p(s)||(i.numericPair=this.reverseObject(s,Ze),i.numberParseRegex=new RegExp(this.constructRegex(s),"g"),i.numericRegex="["+s[0]+"-"+s[9]+"]",n&&(i.numericRegex=s[0]+"-"+s[9],i.symbolNumberSystem=o(r?"numberSymbols":"symbols-numberSystem-"+a.nSystem,a.obj),i.symbolMatch=this.getSymbolMatch(i.symbolNumberSystem),i.numberSystem=a.nSystem))}return i},e.getNumberMapper=function(e,t,n){var r={mapper:{}},i=this.getDefaultNumberingSystem(e);if(!p(i.nSystem)){r.numberSystem=i.nSystem,r.numberSymbols=o("symbols-numberSystem-"+i.nSystem,i.obj),r.timeSeparator=o("timeSeparator",r.numberSymbols);var a=o(i.nSystem+"._digits",t);if(!p(a))for(var s=0,l=Ze;s<l.length;s++){var d=l[s];r.mapper[d]=a[d]}}return r},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=$e,e}(),et={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},tt=["infinity","nan","group","decimal","exponential"],nt=function(){function e(){}return e.numberFormatter=function(e,t,n){var r,i=this,a=c({},t),s={},l={},d=Ke.getDependables(n,e,"",!0),h=d.numericObject;l.numberMapper=g()?c({},h):Qe.getNumberMapper(d.parserObject,Qe.getNumberingSystem(n),!0),l.currencySymbol=g()?o("currencySymbol",h):Ke.getCurrencySymbol(d.numericObject,a.currency||ht,t.altSymbol),l.percentSymbol=g()?o("numberSymbols.percentSign",h):l.numberMapper.numberSymbols.percentSign,l.minusSymbol=g()?o("numberSymbols.minusSign",h):l.numberMapper.numberSymbols.minusSign;var u=l.numberMapper.numberSymbols;if(t.format&&!Ke.formatRegex.test(t.format))s=Ke.customFormat(t.format,l,d.numericObject);else{if(c(a,Ke.getProperNumericSkeleton(t.format||"N")),a.isCurrency="currency"===a.type,a.isPercent="percent"===a.type,g()||(r=Ke.getSymbolPattern(a.type,l.numberMapper.numberSystem,d.numericObject,a.isAccount)),a.groupOne=this.checkValueRange(a.maximumSignificantDigits,a.minimumSignificantDigits,!0),this.checkValueRange(a.maximumFractionDigits,a.minimumFractionDigits,!1,!0),p(a.fractionDigits)||(a.minimumFractionDigits=a.maximumFractionDigits=a.fractionDigits),p(a.useGrouping)&&(a.useGrouping=!0),a.isCurrency&&!g()&&(r=r.replace(/\u00A4/g,Ke.defaultCurrency)),g())s.nData=o(a.type+"nData",h),s.pData=o(a.type+"pData",h);else{var m=r.split(";");s.nData=Ke.getFormatData(m[1]||"-"+m[0],!0,l.currencySymbol),s.pData=Ke.getFormatData(m[0],!1,l.currencySymbol),a.useGrouping&&(a.groupSeparator=u[tt[2]],a.groupData=this.getGroupingDetails(m[0]))}if(p(a.minimumFractionDigits)&&(a.minimumFractionDigits=s.nData.minimumFraction),p(a.maximumFractionDigits)){var f=s.nData.maximumFraction;a.maximumFractionDigits=p(f)&&a.isPercent?0:f}var y=a.minimumFractionDigits,v=a.maximumFractionDigits;p(y)||p(v)||y>v&&(a.maximumFractionDigits=y)}return c(s.nData,a),c(s.pData,a),function(e){return isNaN(e)?u[tt[1]]:isFinite(e)?i.intNumberFormatter(e,s,l):u[tt[0]]}},e.getGroupingDetails=function(e){var t={},n=e.match(Ke.negativeDataRegex);if(n&&n[4]){var r=n[4],i=r.lastIndexOf(",");if(-1!==i){var o=r.split(".")[0];t.primary=o.length-i-1;var a=r.lastIndexOf(",",i-1);-1!==a&&(t.secondary=i-1-a)}}return t},e.checkValueRange=function(e,t,n,r){var i=r?"f":"s",o=0,a=et["l"+i],s=et["m"+i];if(p(e)||(this.checkRange(e,a,r),o++),p(t)||(this.checkRange(t,s,r),o++),2===o){if(!(e<t))return!0;m(s+"specified must be less than the"+a)}else n&&1===o&&m("Both"+s+"and"+s+"must be present");return!1},e.checkRange=function(e,t,n){var r=n?[0,20]:[1,21];(e<r[0]||e>r[1])&&m(t+"value must be within the range"+r[0]+"to"+r[1])},e.intNumberFormatter=function(e,t,n){var r;if(!p(t.nData.type)){e<0?(e*=-1,r=t.nData):r=0===e&&t.zeroData||t.pData;var i="";return r.isPercent&&(e*=100),r.groupOne?i=this.processSignificantDigits(e,r.minimumSignificantDigits,r.maximumSignificantDigits):(i=this.processFraction(e,r.minimumFractionDigits,r.maximumFractionDigits),r.minimumIntegerDigits&&(i=this.processMinimumIntegers(i,r.minimumIntegerDigits))),"scientific"===r.type&&(i=(i=e.toExponential(r.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[tt[4]])),i=i.replace(".",n.numberMapper.numberSymbols[tt[3]]),r.useGrouping&&(i=this.groupNumbers(i,r.groupData.primary,r.groupSeparator||",",n.numberMapper.numberSymbols[tt[3]]||".",r.groupData.secondary)),i=Qe.convertValueParts(i,Ke.latnParseRegex,n.numberMapper.mapper),"N/A"===r.nlead?r.nlead:r.nlead+i+r.nend}},e.processSignificantDigits=function(e,t,n){var r=e+"";return r.length<t?e.toPrecision(t):+(r=e.toPrecision(n))+""},e.groupNumbers=function(e,t,n,r,i){for(var o=!h(i)&&0!==i,a=e.split(r),s=a[0],l=s.length,d="";l>t;)d=s.slice(l-t,l)+(d.length?n+d:""),l-=t,o&&(t=i,o=!1);return a[0]=s.slice(0,l)+(d.length?n:"")+d,a.join(r)},e.processFraction=function(e,t,n){var r=(e+"").split(".")[1],i=r?r.length:0;if(t&&i<t){var o="";if(0!==i){o+=e;for(var a=0;a<t-i;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!h(n)&&(i>n||0===n)?e.toFixed(n):e+""},e.processMinimumIntegers=function(e,t){var n=e.split("."),r=n[0],i=r.length;if(i<t){for(var o=0;o<t-i;o++)r="0"+r;n[0]=r}return n.join(".")},e}(),rt={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var n=["infinity","nan","group","decimal"],r=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,i={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi;e.islamicRegex=/^islamic/;var a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var s={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(t,n,r,i,a){var s,l=r||"date";if(a)s=f({skeleton:t},a).format||f({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(s=o(l+"Formats."+t,n),"dateTime"===l){var d=o("dateFormats."+t,n),c=o("timeFormats."+t,n);s=s.replace("{1}",d).replace("{0}",c)}}else s=o("dateTimeFormats.availableFormats."+t,n);p(s)&&"yMd"===t&&(s="M/d/y")}return s}function d(t,n,r,i){var a={},s=r||"gregorian";if(a.parserObject=Qe.getMainObject(t,n)||(g()?e.blazorDefaultObject:e.defaultObject),i)a.numericObject=o("numbers",a.parserObject);else{var l=g()?"dates":"dates.calendars."+s;a.dateObject=o(l,a.parserObject)}return a}function u(e,t,n,r){return o(e+"Formats-numberSystem-"+t+(r?".accounting":".standard"),n)||(r?o(e+"Formats-numberSystem-"+t+".standard",n):"")}function m(t){var n=t.match(e.dateConverterMapper);if(n&&g()){var r=3===n[0].length?"EEE":"EEEE";return t.replace(e.dateConverterMapper,r)}return t}function f(e,t){var n=e.format||e.skeleton,r=o((t||"en-US")+"."+n,rt);return r||(r=o("en-US."+n,rt)),r&&(r=m(r),e.format=r.replace(/tt/,"a")),e}function y(t){var n=t.match(e.formatRegex),r={},i=n[1].toUpperCase();return r.isAccount="A"===i,r.type=e.patternMatcher[i],t.length>1&&(r.fractionDigits=parseInt(n[2],10)),r}function v(n,r,i,o){var a=o?{}:{nlead:"",nend:""},s=n.match(e.customRegex);if(s){o||(a.nlead=b(s[1],i),a.nend=b(s[10],i),a.groupPattern=s[4]);var l=s[7];if(l&&r){var d=l.match(t);h(d)?a.minimumFraction=0:a.minimumFraction=d.length,a.maximumFraction=l.length-1}}return a}function b(t,n){return t?t.replace(e.defaultCurrency,n):""}function C(e,t,n){return o("currencies."+t+(n?"."+n:".symbol"),e)||o("currencies."+t+".symbol-alt-narrow",e)||"$"}function N(t,r,i){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=t.match(e.customRegex);if(h(a)||""===a[5]&&"N/A"!==t)return o.type=void 0,o;o.nlead=a[1],o.nend=a[10];var s=a[6];o.useGrouping=-1!==s.indexOf(","),s=s.replace(/,/g,"");var l=a[7];if(-1!==s.indexOf("0")&&(o.minimumIntegerDigits=s.length-s.indexOf("0")),h(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),h(r)?c(o,E([o.nlead,o.nend],"%","%")):(c(o,E([o.nlead,o.nend],"$",r.currencySymbol)),o.isCurrency||c(o,E([o.nlead,o.nend],"%",r.percentSymbol))),!h(i)){var d=u(o.type,r.numberMapper.numberSystem,i,!1);o.useGrouping&&(o.groupSeparator=r.numberMapper.numberSymbols[n[2]],o.groupData=nt.getGroupingDetails(d.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function E(e,t,n){for(var r={nlead:e[0],nend:e[1]},i=0;i<2;i++){var o=e[i],a=o.indexOf(t);if(-1!==a&&(a<o.indexOf("'")||a>o.lastIndexOf("'"))){r[s[i]]=o.substr(0,a)+n+o.substr(a+1),r[s[t]]=!0,r.type=r.isCurrency?"currency":"percent";break}}return r}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=l,e.getDependables=d,e.getSymbolPattern=u,e.ConvertDateToWeekFormat=m,e.compareBlazorDateFormats=f,e.getProperNumericSkeleton=y,e.getFormatData=v,e.getCurrencySymbol=C,e.customFormat=function(e,t,n){for(var r={},i=e.split(";"),o=["pData","nData","zeroData"],a=0;a<i.length;a++)r[o[a]]=N(i[a],t,n);return h(r.nData)&&(r.nData=c({},r.pData),r.nData.nlead=h(t)?"-"+r.nData.nlead:t.minusSymbol+r.nData.nlead),r},e.isCurrencyPercent=E,e.getDateSeparator=function(e){var t=(o("dateFormats.short",e)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,n,a){var s=d(n,e,t.calendar);g()&&(t=f(t,e));var c=t.format||l(t.skeleton,s.dateObject,t.type);if(a){if(-1!==(c=c.replace(r,(function(e){return i[e]}))).indexOf("z")){var h=c.match(/z/g).length,p=void 0,u={timeZone:{}};u.numMapper=Qe.getNumberMapper(s.parserObject,Qe.getNumberingSystem(n)),u.timeZone=o("dates.timeZoneNames",s.parserObject);var m=(new Date).getTimezoneOffset(),y=h<4?"+H;-H":u.timeZone.hourFormat;y=y.replace(/:/g,u.numMapper.timeSeparator),0===m?p=u.timeZone.gmtZeroFormat:(p=st.getTimeZoneValue(m,y),p=u.timeZone.gmtFormat.replace(/\{0\}/,p)),c=c.replace(/[z]+/,'"'+p+'"')}c=c.replace(/ $/,"")}return c},e.getActualNumberFormat=function(t,n,r){var i,a,s=d(r,t,"",!0),l={custom:!0},h=s.numericObject,p={},m=(n.format||"").match(e.currencyFormatRegex),f=e.formatRegex.test(n.format)?y(n.format||"N"):{},b={};if(m){b.numberMapper=g()?c({},s.numericObject):Qe.getNumberMapper(s.parserObject,Qe.getNumberingSystem(r),!0);var N=g()?o("currencySymbol",s.numericObject):C(s.numericObject,n.currency||ht,n.altSymbol),E=u("currency",b.numberMapper.numberSystem,s.numericObject,/a/i.test(n.format)),M=(E=E.replace(/\u00A4/g,N)).split(";");p.hasNegativePattern=!!g()||M.length>1,p.nData=g()?o(f.type+"nData",h):v(M[1]||"-"+M[0],!0,N),p.pData=g()?o(f.type+"pData",h):v(M[0],!1,N),m[2]||n.minimumFractionDigits||n.maximumFractionDigits||(i=v(E.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(n.format)||!n.format){if(c(l,y(n.format||"N")),l.custom=!1,a="###0",l.fractionDigits||n.minimumFractionDigits||n.maximumFractionDigits||i){l.fractionDigits&&(n.minimumFractionDigits=n.maximumFractionDigits=l.fractionDigits),a=function(e,t,n){e+=".";for(var r=0;r<t;r++)e+="0";if(t<n)for(var i=n-t,o=0;o<i;o++)e+="#";return e}(a,i||l.fractionDigits||n.minimumFractionDigits||0,n.maximumFractionDigits||0)}if(n.minimumIntegerDigits&&(a=function(e,t){for(var n=e.split("."),r="",i=0;i<t;i++)r+="0";return n[1]?r+"."+n[1]:r}(a,n.minimumIntegerDigits)),n.useGrouping&&(a=function(e){var t=e.split("."),n=t[0],r=3-n.length%3;e="";for(var i=(n=(r&&1===r?"#":2===r?"##":"")+n).length-1;i>0;i-=3)e=","+n[i-2]+n[i-1]+n[i]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(a)),"currency"===l.type||l.type&&g()){g()&&"currency"!==l.type&&(p.pData=o(l.type+"pData",h),p.nData=o(l.type+"nData",h));var S=a;a=p.pData.nlead+S+p.pData.nend,(p.hasNegativePattern||g())&&(a+=";"+p.nData.nlead+S+p.nData.nend)}"percent"!==l.type||g()||(a+=" %")}else a=n.format.replace(/\'/g,'"');return Object.keys(b).length>0&&(a=function(e,t){for(var n=0;n<e.length;n++){var r={".":"decimal",",":"group"}[e[n]];"decimal"===r?e=e.replace(/\./g,o("numberMapper.numberSymbols.decimal",t)||"."):"group"===r&&(e=e.replace(/,/g,o("numberMapper.numberSymbols.group",t)||"."))}return e}(a,b)),a},e.getWeekData=function(e,t){var n="sun",r=o("supplemental.weekData.firstDay",t),i=e;return/en-/.test(i)&&(i=i.slice(3)),i=i.slice(0,2).toUpperCase()+i.substr(2),r&&(n=r[i]||"sun"),a[n]}}(Ke||(Ke={})),function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var n=e.getDate(),r=e.getMonth(),i=e.getFullYear(),o=r+1,a=i;o<3&&(a-=1,o+=12);var s=Math.floor(a/100),l=s-Math.floor(s/4)-2,d=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(o+1))+n-l-1524,c=d+(l=(s=Math.floor((d-1867216.25)/36524.25))-Math.floor(s/4)+1)+1524,h=Math.floor((c-122.1)/365.25),p=Math.floor(365.25*h),u=Math.floor((c-p)/30.6001);n=c-p-Math.floor(30.6001*u),(r=Math.floor((c-p)/20.6001))>13&&(h+=1,r-=12),r-=1,i=h-4716;var m=d-24e5,f=d-1948084,g=Math.floor(f/10631);f-=10631*g;var y=Math.floor((f-.1335)/(10631/30)),v=30*g+y;f-=Math.floor(y*(10631/30)+.1335);var b=Math.floor((f+28.5001)/29.5);13===b&&(b=12);for(var C=f-Math.floor(29.5001*b-29),N=0;N<t.length&&!(t[N]>m);N++);var E=N+16260,M=Math.floor((E-1)/12),S=M+1,w=E-12*M,x=m-t[N-1]+1;return(x+"").length>2&&(x=C,w=b,S=v),{year:S,month:w,date:x}},e.toGregorian=function(e,n,r){var i=r+t[12*(e-1)+1+(n-1)-16260-1]-1+24e5,o=Math.floor(i+.5),a=Math.floor((o-1867216.25)/36524.25),s=(a=o+1+a-Math.floor(a/4))+1524,l=Math.floor((s-122.1)/365.25),d=Math.floor(365.25*l),c=Math.floor((s-d)/30.6001),h=s-d-Math.floor(30.6001*c),p=c-(c>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+h)}}(Je||(Je={}));var it=/\/MMMMM|MMMM|MMM|a|LLL|EEEEE|EEEE|E|K|cccc|ccc|G+|z+/gi,ot=["sun","mon","tue","wed","thu","fri","sat"],at={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},st=function(){function e(){}return e.dateFormat=function(e,t,n){var r=this,i=Ke.getDependables(n,e,t.calendar),a=o("parserObject.numbers",i),s=i.dateObject,l={isIslamic:Ke.islamicRegex.test(t.calendar)};g()&&t.isServerRendered&&(t=Ke.compareBlazorDateFormats(t,e));var d=t.format||Ke.getResultantPattern(t.skeleton,i.dateObject,t.type,!1,g()?e:"");if(l.dateSeperator=g()?o("dateSeperator",s):Ke.getDateSeparator(i.dateObject),p(d))m("Format options or type given must be invalid");else{d=Ke.ConvertDateToWeekFormat(d),l.pattern=d,l.numMapper=g()?c({},a):Qe.getNumberMapper(i.parserObject,Qe.getNumberingSystem(n));for(var h=0,u=d.match(it)||[];h<u.length;h++){var f=u[h],y=f.length,v=f[0];"K"===v&&(v="h");switch(v){case"E":case"c":g()?l.weekday=o("days."+Ke.monthIndex[y],s):l.weekday=i.dateObject[Ke.days]["stand-alone"][Ke.monthIndex[y]];break;case"M":case"L":g()?l.month=o("months."+Ke.monthIndex[y],s):l.month=i.dateObject[Ke.month]["stand-alone"][Ke.monthIndex[y]];break;case"a":l.designator=g()?o("dayPeriods",s):o("dayPeriods.format.wide",s);break;case"G":var b=y<=3?"eraAbbr":4===y?"eraNames":"eraNarrow";l.era=g()?o("eras",s):o("eras."+b,i.dateObject);break;case"z":l.timeZone=o("dates.timeZoneNames",i.parserObject)}}}return function(e){return isNaN(e.getDate())?null:r.intDateFormatter(e,l)}},e.intDateFormatter=function(e,t){for(var n="",r=t.pattern.match(Ke.dateParseRegex),i=this.getCurrentDateValue(e,t.isIslamic),o=0,a=r;o<a.length;o++){var s=a[o],l=s.length,d=s[0];"K"===d&&(d="h");var c=void 0,p="",u=void 0,m=void 0,f="";switch(d){case"M":case"L":c=i.month,l>2?n+=t.month[c]:u=!0;break;case"E":case"c":n+=t.weekday[ot[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(u=!0,"d"===d)c=i.date;else if("f"===d){u=!1,m=!0;var g=(p=(p=e[at[d]]().toString()).substring(0,l)).length;if(l!==g){if(l>3)continue;for(var y=0;y<l-g;y++)p="0"+p.toString()}f+=p}else c=e[at[d]]();"h"===d&&(c=c%12||12);break;case"y":m=!0,f+=i.year,2===l&&(f=f.substr(f.length-2));break;case"a":var v=e.getHours()<12?"am":"pm";n+=t.designator[v];break;case"G":var b=e.getFullYear()<0?0:1,C=t.era[b];h(C)&&(C=t.era[b?0:1]),n+=C||"";break;case"'":n+="''"===s?"'":s.replace(/\'/g,"");break;case"z":var N=e.getTimezoneOffset(),E=l<4?"+H;-H":t.timeZone.hourFormat;E=E.replace(/:/g,t.numMapper.timeSeparator),0===N?n+=t.timeZone.gmtZeroFormat:(m=!0,f=this.getTimeZoneValue(N,E)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":n+=t.numMapper.numberSymbols.timeSeparator;break;case"/":n+=t.dateSeperator;break;default:n+=s}u&&(m=!0,f=this.checkTwodigitNumber(c,l)),m&&(n+=Qe.convertValueParts(f,Ke.latnParseRegex,t.numMapper.mapper))}return n},e.getCurrentDateValue=function(e,t){return t?Je.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var n=e+"";return 2===t&&2!==n.length?"0"+n:n},e.getTimeZoneValue=function(e,t){var n=this,r=t.split(";")[e>0?1:0],i=Math.abs(e);return r.replace(/HH?|mm/g,(function(e){var t=e.length,r=-1!==e.indexOf("H");return n.checkTwodigitNumber(Math.floor(r?i/60:i%60),t)}))},e}(),lt=new Ue,dt=!1,ct="en-US",ht="USD";var pt,ut,mt=(pt=function(e,t){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}pt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ft=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},gt=0,yt=0,vt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.randomId=function(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),r.isStringTemplate=!1,r.needsID=!1,r.isReactHybrid=!1,h(r.enableRtl)&&r.setProperties({enableRtl:dt},!0),h(r.locale)&&r.setProperties({locale:ct},!0),r.moduleLoader=new Ge(r),r.localObserver=new Ue(r),lt.on("notifyExternalChange",r.detectFunction,r,r.randomId),p(n)||r.appendTo(),r}return mt(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(he([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),lt.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new Ue(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.appendTo=function(t){if(h(t)||"string"!=typeof t?h(t)||(this.element=t):this.element=document.querySelector(t),!h(this.element)){var n="e-"+this.getModuleName().toLowerCase();ce([this.element],["e-control",n]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var r=o("ej2_instances",this.element);r&&-1!==r.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){if(g()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,n){if("string"==typeof e)this.localObserver.on(e,t,n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var n=0,r=e;n<r.length;n++){var i=r[n];this.localObserver.off(i.event,i.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[n])&&this.prototype.injectedModules.push(e[n])},t.prototype.createElement=function(e,t,n){return n&&this.isReactHybrid?(t&&(t={}),t["data-id"]=U(),V.createElement(e,t)):de(e,t)},t.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);h(e)||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(gt=0),ut=this.pageID(location.href),yt=history.length,e+"_"+ut+"_"+gt++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return ut!==this.pageID(location.href)||yt!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,n={},r=0,i=e;r<i.length;r++){var s,l=i[r];p(s=o(l,this))||a(l,this.getActualProperties(s),n)}return JSON.stringify(n,(function(e,n){return t.getActualProperties(n)}))},t.prototype.getActualProperties=function(e){return e instanceof Xe?o("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var n={},r=function(r){if(-1===t.indexOf(r)){var o=e[r];if("object"!=typeof o||o instanceof Array)n[r]=o;else{var a=t.filter((function(e){return new RegExp(r+".").test(e)})).map((function(e){return e.replace(r+".","")}));n[r]=i.iterateJsonProperties(i.getActualProperties(o),a)}}},i=this,o=0,a=Object.keys(e);o<a.length;o++){r(a[o])}return n},ft([je(!1)],t.prototype,"enablePersistence",void 0),ft([je()],t.prototype,"enableRtl",void 0),ft([je()],t.prototype,"locale",void 0),t=ft([_e],t)}(We);"undefined"!=typeof window&&window.addEventListener("popstate",(function(){gt=0}));!function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)}}();!function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)}}();function bt(e,t){for(var n=getComputedStyle(e),r=[],i=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var a=getComputedStyle(o);"absolute"===n.position&&"static"===a.position||!i.test(a.overflow+a.overflowY+a.overflowX)||r.push(o),o=o.parentElement}return t||r.push(document),r}var Ct,Nt,Et="paste-content";!function(e){e[e.Toolbar=0]="Toolbar",e[e.Content=1]="Content",e[e.Popup=2]="Popup",e[e.LinkToolbar=3]="LinkToolbar",e[e.TextToolbar=4]="TextToolbar",e[e.ImageToolbar=5]="ImageToolbar",e[e.InlineToolbar=6]="InlineToolbar",e[e.TableToolbar=7]="TableToolbar"}(Ct||(Ct={})),function(e){e.Expand="Expand",e.MultiRow="MultiRow",e.Scrollable="Scrollable"}(Nt||(Nt={}));var Mt=function(){function e(e,t){this.parent=e,this.locator=t,this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.render=function(){this.parent;this.contentRenderer=this.renderer.getRenderer(Ct.Content),this.contentRenderer.renderPanel()},e.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"}),this.parent.notify(e.requestType+"-begin",e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("model-changed",this.refresh,this),this.parent.on("keyUp",this.keyUp,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("model-changed",this.refresh),this.parent.off("keyUp",this.keyUp))},e.prototype.keyUp=function(e){if("HTML"===this.parent.editorMode)switch(e.args.which){case 46:case 8:var t=this.parent.contentModule.getEditPanel().childNodes;if(0===t.length||1===t.length&&("BR"===t[0].tagName||"P"===t[0].tagName&&(0===t[0].childNodes.length||""===t[0].textContent))){var n=this.parent.contentModule.getEditPanel();n.innerHTML="<p><br/></p>",this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),n.childNodes[0],0)}}},e}(),St=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},xt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},Tt=function(e){function t(t,r){var i=e.call(this,r,t)||this;return i.keyPressHandler=function(e){for(var t=e.altKey,r=e.ctrlKey,o=e.shiftKey,a=e.which,s=0,l=Object.keys(i.keyConfigs);s<l.length;s++)for(var d=l[s],c=0,h=i.keyConfigs[d].split(",");c<h.length;c++){var p=h[c],u=n.getKeyConfigData(p.trim());t===u.altKey&&r===u.ctrlKey&&o===u.shiftKey&&a===u.keyCode&&(e.action=d)}i.keyAction&&i.keyAction(e)},i.bind(),i}var n;return St(t,e),n=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),r={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?r.keyCode=Number(t[t.length-1]):r.keyCode=n.getKeyCode(t[t.length-1]),n.configCache[e]=r,r},t.getKeyCode=function(e){return xt[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},wt([je({})],t.prototype,"keyConfigs",void 0),wt([je("keyup")],t.prototype,"eventName",void 0),wt([ze()],t.prototype,"keyAction",void 0),t=n=wt([_e],t)}(We),Lt=function(){function e(e,t){this.parent=e;var n=t;this.rendererFactory=n.getService("rendererFactory"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("sourceCode",this.sourceCode,this),this.parent.on("initial-end",this.onInitialEnd,this),this.parent.on("updateSource",this.updateSourceCode,this)},e.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.off("sourceCode",this.sourceCode),this.parent.off("updateSource",this.updateSourceCode),this.parent.off("initial-end",this.onInitialEnd),this.parent.formatter.editorManager.observer.off("keydown-handler",this.onKeyDown)},e.prototype.getSourceCode=function(){return this.parent.createElement("textarea",{className:"e-rte-srctextarea"})},e.prototype.wireEvent=function(e){this.keyboardModule=new Tt(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),y.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},e.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&y.remove(this.previewElement,"mousedown",this.mouseDownHandler)},e.prototype.wireBaseKeyDown=function(){this.parent.keyboardModule=new Tt(this.contentModule.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},e.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},e.prototype.mouseDownHandler=function(e){this.parent.notify("sourceCodeMouseDown",{args:e})},e.prototype.previewKeyDown=function(e){switch(e.action){case"html-source":this.updateSourceCode(e),e.preventDefault();break;case"toolbar-focus":if(this.parent.toolbarSettings.enable){this.parent.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}}},e.prototype.onKeyDown=function(e){switch(e.event.action){case"html-source":e.event.preventDefault(),this.sourceCode(e),e.callBack({requestType:"SourceCode",editorMode:"HTML",event:e.event})}},e.prototype.sourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger("actionBegin",{requestType:"SourceCode",targetItem:"SourceCode",args:e});var t=be(".e-toolbar-item",this.parent.element);if(this.contentModule=this.rendererFactory.getRenderer(Ct.Content),this.parent.notify("updateToolbarItem",{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),h(this.previewElement)&&(this.previewElement=this.getSourceCode()),this.parent.updateValueData(),this.parent.iframeSettings.enable){var n=void 0;(n=h(this.parent.element.querySelector("#"+this.parent.element.id+"_source-view"))?this.parent.createElement("div",{className:"e-source-content",id:this.parent.element.id+"_source-view"}):this.parent.element.querySelector("#"+this.parent.element.id+"_source-view")).appendChild(this.previewElement),this.parent.element.appendChild(n),n.style.height=this.contentModule.getPanel().style.height,n.style.marginTop=this.contentModule.getPanel().style.marginTop,this.getPanel().value=this.getTextAreaValue(),this.contentModule.getPanel().style.display="none",n.style.display="block"}else this.contentModule.getPanel().appendChild(this.previewElement),this.getPanel().value=this.getTextAreaValue(),this.contentModule.getEditPanel().style.display="none",this.previewElement.style.display="block";(this.parent.isBlur=!1,this.parent.disableToolbarItem(this.parent.toolbarSettings.items),this.parent.enableToolbarItem("SourceCode"),this.parent.getToolbar()&&he([this.parent.getToolbar()],["e-expand-open"]),he(t,["e-active"]),this.parent.setContentHeight("sourceCode",!0),this.wireEvent(this.previewElement),this.unWireBaseKeyDown(),this.previewElement.focus(),this.parent.updateValue(),h(this.parent.placeholder)||this.parent.iframeSettings.enable)||(this.parent.element.querySelector(".rte-placeholder").style.display="none");this.parent.trigger("actionComplete",{requestType:"SourceCode",targetItem:"SourceCode",args:e}),this.parent.invokeChangeEvent()},e.prototype.updateSourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger("actionBegin",{requestType:"Preview",targetItem:"Preview",args:e});var t=this.getPanel();this.parent.notify("updateToolbarItem",{targetItem:"Preview",updateItem:"SourceCode",baseToolbar:this.parent.getBaseToolbarObject()});var n=this.parent.serializeValue(t.value),r=null===n||""===n?"<p><br/></p>":n;(this.parent.iframeSettings.enable?(t.parentElement.style.display="none",this.contentModule.getPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=r):(t.style.display="none",this.contentModule.getEditPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=r),this.parent.isBlur=!1,this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.parent.getToolbar()&&he([this.parent.getToolbar()],["e-expand-open"]),this.parent.setContentHeight("preview",!0),this.unWireEvent(),this.wireBaseKeyDown(),this.contentModule.getEditPanel().focus(),this.parent.updateValue(),h(this.parent.placeholder)||0!==this.contentModule.getEditPanel().innerText.length)||(this.parent.element.querySelector(".rte-placeholder").style.display="block");this.parent.trigger("actionComplete",{requestType:"Preview",targetItem:"Preview",args:e}),this.parent.formatter.enableUndo(this.parent),this.parent.invokeChangeEvent()},e.prototype.getTextAreaValue=function(){return"<p><br></p>"===this.contentModule.getEditPanel().innerHTML||12===this.contentModule.getEditPanel().innerHTML.length||1===this.contentModule.getEditPanel().childNodes.length&&"P"===this.contentModule.getEditPanel().childNodes[0].tagName&&7===this.contentModule.getEditPanel().innerHTML.length?"":this.parent.value},e.prototype.getPanel=function(){return this.parent.element.querySelector(".e-rte-srctextarea")},e.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},e.prototype.destroy=function(){this.removeEventListener()},e}(),kt={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}},Dt=function(){function e(){this.services={}}return e.prototype.register=function(e,t){h(this.services[e])&&(this.services[e]=t)},e.prototype.getService=function(e){if(h(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},e}(),Ot=function(){function e(){this.rendererMap={}}return e.prototype.addRenderer=function(e,t){var n=l(Ct,e);h(this.rendererMap[n])&&(this.rendererMap[n]=t)},e.prototype.getRenderer=function(e){var t=l(Ct,e);if(h(this.rendererMap[t]))throw"The renderer "+t+" is not found";return this.rendererMap[t]},e}(),Pt=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("execCommandCallBack",this.commandCallBack,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.commandCallBack=function(e){"Undo"!==e.requestType&&"Redo"!==e.requestType&&this.parent.formatter.saveData(),this.parent.notify("toolbar-refresh",{args:e}),this.parent.notify("count",{})},e.prototype.removeEventListener=function(){this.parent.off("execCommandCallBack",this.commandCallBack),this.parent.off("destroy",this.removeEventListener)},e}(),Rt=[{text:"Dashed Borders",cssClass:"e-dashed-borders",command:"Table",subCommand:"Dashed"},{text:"Alternate Rows",cssClass:"e-alternate-rows",command:"Table",subCommand:"Alternate"}];var At=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ht=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},It=["Bold","Italic","Underline","|","Formats","Alignments","OrderedList","UnorderedList","|","CreateLink","Image","|","SourceCode","Undo","Redo"],Bt=[{text:"Segoe UI",value:"Segoe UI",cssClass:"e-segoe-ui"},{text:"Arial",value:"Arial,Helvetica,sans-serif",cssClass:"e-arial"},{text:"Georgia",value:"Georgia,serif",cssClass:"e-georgia"},{text:"Impact",value:"Impact,Charcoal,sans-serif",cssClass:"e-impact"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif",cssClass:"e-tahoma"},{text:"Times New Roman",value:"Times New Roman,Times,serif",cssClass:"e-times-new-roman"},{text:"Verdana",value:"Verdana,Geneva,sans-serif",cssClass:"e-verdana"}],jt=[{text:"8 pt",value:"8pt"},{text:"10 pt",value:"10pt"},{text:"12 pt",value:"12pt"},{text:"14 pt",value:"14pt"},{text:"18 pt",value:"18pt"},{text:"24 pt",value:"24pt"},{text:"36 pt",value:"36pt"}],Ft=[{text:"Paragraph",value:"P",cssClass:"e-paragraph"},{text:"Code",value:"Pre",cssClass:"e-code"},{text:"Quotation",value:"BlockQuote",cssClass:"e-quote"},{text:"Heading 1",value:"H1",cssClass:"e-h1"},{text:"Heading 2",value:"H2",cssClass:"e-h2"},{text:"Heading 3",value:"H3",cssClass:"e-h3"},{text:"Heading 4",value:"H4",cssClass:"e-h4"}],zt={Custom:["","#000000","#e7e6e6","#44546a","#4472c4","#ed7d31","#a5a5a5","#ffc000","#70ad47","#ff0000","#f2f2f2","#808080","#cfcdcd","#d5dce4","#d9e2f3","#fbe4d5","#ededed","#fff2cc","#e2efd9","#ffcccc","#d9d9d9","#595959","#aeaaaa","#acb9ca","#b4c6e7","#f7caac","#dbdbdb","#ffe599","#c5e0b3","#ff8080","#bfbfbf","#404040","#747070","#8496b0","#8eaadb","#f4b083","#c9c9c9","#ffd966","#a8d08d","#ff3333","#a6a6a6","#262626","#3b3838","#323e4f","#2f5496","#c45911","#7b7b7b","#bf8f00","#538135","#b30000","#7f7f7f","#0d0d0d","#161616","#212934","#1f3763","#823b0b","#525252","#7f5f00","#375623","#660000"]},_t={Custom:["","#000000","#ffff00","#00ff00","#00ffff","#0000ff","#ff0000","#000080","#800080","#996633","#f2f2f2","#808080","#ffffcc","#b3ffb3","#ccffff","#ccccff","#ffcccc","#ccccff","#ff80ff","#f2e6d9","#d9d9d9","#595959","#ffff80","#80ff80","#b3ffff","#8080ff","#ff8080","#8080ff","#ff00ff","#dfbf9f","#bfbfbf","#404040","#ffff33","#33ff33","#33ffff","#3333ff","#ff3333","#0000b3","#b300b3","#c68c53","#a6a6a6","#262626","#e6e600","#00b300","#009999","#000099","#b30000","#000066","#660066","#86592d","#7f7f7f","#0d0d0d","#999900","#006600","#006666","#000066","#660000","#00004d","#4d004d","#734d26"]},qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je(!0)],t.prototype,"enable",void 0),Ht([je(!0)],t.prototype,"enableFloating",void 0),Ht([je(Nt.Expand)],t.prototype,"type",void 0),Ht([je(It)],t.prototype,"items",void 0),Ht([je({})],t.prototype,"itemConfigs",void 0),t}(Xe),Gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je([".jpeg",".jpg",".png"])],t.prototype,"allowedTypes",void 0),Ht([je("inline")],t.prototype,"display",void 0),Ht([je("Blob")],t.prototype,"saveFormat",void 0),Ht([je("auto")],t.prototype,"width",void 0),Ht([je("auto")],t.prototype,"height",void 0),Ht([je(null)],t.prototype,"saveUrl",void 0),Ht([je(null)],t.prototype,"path",void 0),Ht([je(!0)],t.prototype,"resize",void 0),Ht([je(0)],t.prototype,"minWidth",void 0),Ht([je(null)],t.prototype,"maxWidth",void 0),Ht([je(0)],t.prototype,"minHeight",void 0),Ht([je(null)],t.prototype,"maxHeight",void 0),Ht([je(!1)],t.prototype,"resizeByPercent",void 0),t}(Xe),Ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je("100%")],t.prototype,"width",void 0),Ht([je(Rt)],t.prototype,"styles",void 0),Ht([je(!0)],t.prototype,"resize",void 0),Ht([je(0)],t.prototype,"minWidth",void 0),Ht([je(null)],t.prototype,"maxWidth",void 0),t}(Xe),Vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je(!0)],t.prototype,"enable",void 0),Ht([je(!1)],t.prototype,"showOnRightClick",void 0),Ht([je("hide")],t.prototype,"actionOnScroll",void 0),Ht([je(["Open","Edit","UnLink"])],t.prototype,"link",void 0),Ht([je(["Replace","Align","Caption","Remove","-","InsertLink","OpenImageLink","EditImageLink","RemoveImageLink","Display","AltText","Dimension"])],t.prototype,"image",void 0),Ht([je(["Cut","Copy","Paste"])],t.prototype,"text",void 0),Ht([je(["TableHeader","TableRows","TableColumns","BackgroundColor","-","TableRemove","Alignments","TableCellVerticalAlign","Styles"])],t.prototype,"table",void 0),t}(Xe),Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je(!1)],t.prototype,"prompt",void 0),Ht([je(null)],t.prototype,"deniedAttrs",void 0),Ht([je(["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-family","font-size","font-weight","font-style","height","left","line-height","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","position","right","table-layout","text-align","text-decoration","text-indent","top","vertical-align","visibility","white-space","width"])],t.prototype,"allowedStyleProps",void 0),Ht([je(null)],t.prototype,"deniedTags",void 0),Ht([je(!0)],t.prototype,"keepFormat",void 0),Ht([je(!1)],t.prototype,"plainText",void 0),t}(Xe),Kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je(null)],t.prototype,"default",void 0),Ht([je("65px")],t.prototype,"width",void 0),Ht([je(Bt)],t.prototype,"items",void 0),t}(Xe),Jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je(null)],t.prototype,"default",void 0),Ht([je("35px")],t.prototype,"width",void 0),Ht([je(jt)],t.prototype,"items",void 0),t}(Xe),Xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je(null)],t.prototype,"default",void 0),Ht([je("65px")],t.prototype,"width",void 0),Ht([je(Ft)],t.prototype,"types",void 0),t}(Xe),$t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je("#ff0000")],t.prototype,"default",void 0),Ht([je("Palette")],t.prototype,"mode",void 0),Ht([je(10)],t.prototype,"columns",void 0),Ht([je(zt)],t.prototype,"colorCode",void 0),Ht([je(!1)],t.prototype,"modeSwitcher",void 0),t}(Xe),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return At(t,e),Ht([je("#ffff00")],t.prototype,"default",void 0),Ht([je("Palette")],t.prototype,"mode",void 0),Ht([je(10)],t.prototype,"columns",void 0),Ht([je(_t)],t.prototype,"colorCode",void 0),Ht([je(!1)],t.prototype,"modeSwitcher",void 0),t}(Xe),Zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},en=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zt(t,e),Qt([je([])],t.prototype,"styles",void 0),Qt([je([])],t.prototype,"scripts",void 0),t}(Xe),tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zt(t,e),Qt([je(!1)],t.prototype,"enable",void 0),Qt([je(null)],t.prototype,"attributes",void 0),Qt([Fe({},en)],t.prototype,"resources",void 0),t}(Xe),nn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rn=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},on=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nn(t,e),rn([je(!1)],t.prototype,"enable",void 0),rn([je(!0)],t.prototype,"onSelection",void 0),t}(Xe);function an(e,t,n,r){var i;n?i=t.contentModule.getDocument().querySelector("body"):i=t.element;if(Object.keys(e).length)for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];if("class"===s)i.classList.add(e[s]);else if("disabled"===s&&"disabled"===e[s])t.enabled=!1,t.setEnable();else if("readonly"===s&&"readonly"===e[s])t.readonly=!0,t.setReadOnly(r);else if("style"===s)i.setAttribute("style",e[s]);else if("tabindex"===s)t.inputElement.setAttribute("tabindex",e[s]);else if("placeholder"===s)t.placeholder=e[s],t.setPlaceHolder();else{["name","required"].indexOf(s)>-1?t.valueContainer.setAttribute(s,e[s]):i.setAttribute(s,e[s])}}}var sn=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],ln=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],dn=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],cn=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:sn,attributes:ln}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){return this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs(),this.wrapElement.innerHTML},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){ge(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+dn.join("],[")+"]");e.length>0&&e.forEach((function(e){dn.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,n){var r=e.wrapElement.querySelectorAll(t.selector);r.length>0&&r.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}(),hn=["Undo","Redo"],pn=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function un(){var e=!1;return Pe.isDevice&&Pe.isIos&&(e=!0),e}function mn(e,t){for(var n,r=0,i=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if("Separator"!==t[i].type){if("OrderedList"===e[r]&&"OL"===t[i].subCommand){n.push(i);break}if("UnorderedList"===e[r]&&"UL"===t[i].subCommand){n.push(i);break}if("InsertCode"===e[r]&&"Pre"===t[i].subCommand){n.push(i);break}if(e[r]===t[i].subCommand){n.push(i);break}}return n}("object"==typeof(n=hn)?n:[n],e.toolbarObj.items),o=be(".e-toolbar-item",e.toolbarObj.element),a=0,s=Object.keys(t);a<s.length;a++){var l=s[a],d=o[i[r]];d&&e.toolbarObj.enableItems(d,t[l]),r++}}function fn(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}function gn(e,t){var n;return null!==e&&""!==e?(n=t.enableHtmlEncode?yn(bn(e)):yn(e),t.setProperties({value:n},!0)):n=t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",n}function yn(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var n=document.createElement("div");if(t.childNodes.length>0){for(var r=void 0,i=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||pn.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(r?i.appendChild(t.firstChild):(o=de("p"),n.appendChild(o),o.appendChild(t.firstChild)),i=o,r=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?ge(t.firstChild):(n.appendChild(t.firstChild),r=!1);for(var a=n.querySelectorAll("img"),s=0;s<a.length;s++)a[s].classList.contains("e-rte-image")||a[s].classList.add("e-rte-image"),a[s].classList.contains("e-imginline")||a[s].classList.contains("e-imgbreak")||a[s].classList.add("e-imginline")}return n.innerHTML}function vn(e){return"<p><br></p>"===e||"&lt;p&gt;&lt;br&gt;&lt;/p&gt;"===e||""===e}function bn(e){return e.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}var Cn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nn=function(){return(Nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},En=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Mn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.defaultResetValue=null,r.keyUpAction=!1,r.isFocusOut=!1,r.isRTE=!1,r.isBlur=!0,r.needsID=!0,r}return Cn(t,e),t.prototype.requiredModules=function(){var e=[];return e.push({member:"image",args:[this,this.serviceLocator]}),this.showCharCount&&e.push({member:"count",args:[this,this.serviceLocator]}),"HTML"===this.editorMode&&(e.push({member:"htmlEditor",args:[this,this.serviceLocator]}),e.push({member:"pasteCleanup",args:[this,this.serviceLocator]})),e},t.prototype.updateEnable=function(){this.enabled?(he([this.element],"e-disabled"),this.element.setAttribute("aria-disabled","false"),h(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(ce([this.element],"e-disabled"),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.eventInitializer():this.unWireEvents()},t.prototype.preRender=function(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this),this.clickPoints={clientX:0,clientY:0},this.initialValue=this.value,this.serviceLocator=new Dt,this.initializeServices(),this.setContainer(),this.persistData(),Ne(this.element,{width:f(this.width)}),ye(this.element,{role:"application"})},t.prototype.persistData=function(){},t.prototype.setContainer=function(){this.originalElement=this.element.cloneNode(!0),null!==this.value&&null===this.valueTemplate||this.setValue(),this.element.hasAttribute("tabindex")&&(this.htmlAttributes={tabindex:this.element.getAttribute("tabindex")},this.element.removeAttribute("tabindex")),this.isBlazor()||(this.element.innerHTML="");for(var e=["class","style","id","ejs-for"],t={},n=0;n<this.element.attributes.length;n++)-1!==e.indexOf(this.element.attributes[n].name)||/^data-val/.test(this.element.attributes[n].name)||(t[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));c(t,this.htmlAttributes,t),this.setProperties({htmlAttributes:t},!0),h(this.htmlAttributes.id)||(this.element.id=this.htmlAttributes.id),"TEXTAREA"===this.element.tagName||(this.valueContainer=this.createElement("textarea",{id:this.getID()+"-value"})),this.valueContainer.name=this.getID(),ce([this.valueContainer],"e-rte-hidden"),this.element.appendChild(this.valueContainer)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.selectAll=function(){this.notify("selectAll",{})},t.prototype.selectRange=function(e){this.notify("selectRange",{range:e})},t.prototype.getSelection=function(){var e="";return this.notify("getSelectedHtml",{callBack:function(t){e=t}}),e},t.prototype.executeCommand=function(e,t,n){if(t=this.htmlPurifier(e,t),"HTML"===this.editorMode){var r=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(!(!this.iframeSettings.enable||r.startContainer!==this.inputElement)||!this.inputElement.contains(r.startContainer))&&this.focusIn()}var i=kt[e];n&&n.undo&&n.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(i.command,i.subCommand?i.subCommand:t||i.value,null,null,t||i.value,t||i.value),n&&n.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.contentChanged()},t.prototype.htmlPurifier=function(e,t){if("HTML"===this.editorMode)switch(e){case"insertHTML":this.enableHtmlSanitizer&&(t="string"==typeof t?this.htmlEditorModule.sanitizeHelper(t):this.htmlEditorModule.sanitizeHelper(t.outerHTML));break;case"insertTable":h(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});break;case"insertImage":var n=this.createElement("img",{attrs:{src:t.url}}),r=n.outerHTML;this.enableHtmlSanitizer&&(r=this.htmlEditorModule.sanitizeHelper(n.outerHTML));var i=""!==r&&this.createElement("div",{innerHTML:r}).firstElementChild.getAttribute("src")||null;i=h(i)?"":i,t.url=i,h(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),h(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});break;case"createLink":var o=this.createElement("a",{attrs:{href:t.url}}),a=o.outerHTML;this.enableHtmlSanitizer&&(a=this.htmlEditorModule.sanitizeHelper(o.outerHTML));var s=""!==a&&this.createElement("div",{innerHTML:a}).firstElementChild.getAttribute("href")||null;s=h(s)?"":s,t.url=s}return t},t.prototype.encode=function(e){var t=this.createElement("div");return t.innerText=e.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},t.prototype.render=function(){this.value&&!this.valueTemplate&&this.setProperties({value:this.serializeValue(this.value)},!0),this.renderModule=new Mt(this,this.serviceLocator),this.sourceCodeModule=new Lt(this,this.serviceLocator),this.notify("initial-load",{}),this.trigger("load"),this.RTERender();new Pt(this);this.notify("initial-end",{}),this.setContentHeight(),null!==this.value&&(this.isBlazor()?this.defaultResetValue=this.value:this.valueContainer.defaultValue=this.value),this.enabled?this.eventInitializer():this.unWireEvents(),this.renderComplete()},t.prototype.eventInitializer=function(){this.wireEvents()},t.prototype.keyDown=function(e){if(this.notify("keyDown",{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var t=this.getRange();if(Ce("#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer,"pre")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){var n=new RegExp(String.fromCharCode(8203),"g"),r=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(n,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,r)}}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==e.action&&(e.action&&"paste"!==e.action||9===e.which))switch(this.formatter.process(this,null,e),e.action){case"escape":this.contentModule.getEditPanel().focus()}h(this.placeholder)||this.setPlaceHolder(),this.autoResize()},t.prototype.keyUp=function(e){this.notify("keyUp",{member:"keyup",args:e});var t=32===e.which||13===e.which||8===e.which||46===e.which;("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),this.inputElement&&0!==this.inputElement.textContent.length&&this.notify("toolbar-refresh",{args:e}),h(this.placeholder)||this.setPlaceHolder()},t.prototype.serializeValue=function(e){return"HTML"!==this.editorMode||h(e)||(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(bn(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.updateValue=function(e){if(h(e)){var t=this.inputElement.innerHTML;this.setProperties({value:vn(t)?null:t})}else this.setProperties({value:e})},t.prototype.triggerEditArea=function(e){if(un()){var t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.notify("editAreaClick",{member:"editAreaClick",args:e})}else this.notify("editAreaClick",{member:"editAreaClick",args:e})},t.prototype.notifyMouseUp=function(e){var t=e.touches?e.changedTouches[0]:e;this.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.notify("toolbar-refresh",{args:e}),this.triggerEditArea(e)},t.prototype.mouseUp=function(e){this.notifyMouseUp(e)},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.onCopy=function(){this.contentModule.getDocument().execCommand("copy",!1,null)},t.prototype.onCut=function(){this.contentModule.getDocument().execCommand("cut",!1,null)},t.prototype.onPaste=function(e){var t=this,n={originalEvent:e,cancel:!1,requestType:"Paste"};this.trigger("actionBegin",n,(function(n){var r=t.getText().length-t.getSelection().length+(h(e)||h(e.clipboardData)?0:e.clipboardData.getData("text/plain").length);if(!n.cancel&&(-1===t.maxLength||r<t.maxLength))if(h(t.pasteCleanupModule)){var i={requestType:"Paste",editorMode:t.editorMode,event:e},o=null;e&&!h(e.clipboardData)&&(o=e.clipboardData.getData("text/plain"));var a=e&&e.clipboardData&&e.clipboardData.items.length>0?e.clipboardData.items[0].getAsFile():null;null!==o&&t.notify(Et,{file:a,args:e,text:o}),setTimeout((function(){t.formatter.onSuccess(t,i)}),0)}else t.notify("pasteClean",{args:e});else e.preventDefault()}))},t.prototype.clipboardAction=function(e,t){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}},t.prototype.destroy=function(){this.isDestroyed||this.isRendered&&(this.notify("destroy",{}),this.destroyDependentModules(),h(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),this.unWireEvents(),"TEXTAREA"===this.originalElement.tagName||(""!==this.originalElement.innerHTML.trim()?(this.element.innerHTML=this.originalElement.innerHTML.trim(),this.setProperties({value:h(this.initialValue)?null:this.initialValue},!0)):this.element.innerHTML=""),this.placeholder&&this.placeHolderWrapper&&(this.placeHolderWrapper=null),h(this.cssClass)||he([this.element],this.cssClass),this.removeHtmlAttributes(),this.removeAttributes(),g()&&this.isServerRendered?this.isDestroyed=!0:e.prototype.destroy.call(this),this.isRendered=!1,this.enablePersistence&&window.localStorage.removeItem(this.getModuleName()+this.element.id))},t.prototype.removeHtmlAttributes=function(){if(this.htmlAttributes)for(var e=Object.keys(this.htmlAttributes),t=0;t<e.length&&this.element.hasAttribute(e[t]);t++)this.element.removeAttribute(e[t])},t.prototype.removeAttributes=function(){this.enabled||he([this.element],"e-disabled"),this.enableRtl&&he([this.element],"e-rtl"),this.readonly&&he([this.element],"e-rte-readonly"),""!==this.element.style.width&&""===this.originalElement.style.width&&this.element.style.removeProperty("width"),""!==this.element.style.height&&""===this.originalElement.style.height&&this.element.style.removeProperty("height"),this.element.removeAttribute("aria-disabled"),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex")},t.prototype.destroyDependentModules=function(){this.renderModule.destroy(),this.formatter.editorManager.undoRedoManager.destroy(),this.sourceCodeModule.destroy()},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.getText=function(){return this.contentModule.getText()},t.prototype.getSelectedHtml=function(){var e=this.createElement("div"),t=this.contentModule.getDocument().getSelection();if(t.rangeCount>0){var n=t.getRangeAt(0).cloneContents();e.appendChild(n)}return e.innerHTML},t.prototype.getModuleName=function(){return"richtexteditor"},t.prototype.onPropertyChanged=function(t,n){for(var r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];switch(o){case"value":var a,s=t[o];a="HTML"===this.editorMode?gn(s,this):s,h(s)||""===s||(this.value=this.serializeValue(this.enableHtmlEncode?this.encode(bn(a)):a)),this.updatePanelValue(),this.setPlaceHolder(),this.notify("xhtmlValidation",{module:"XhtmlValidation",newProp:t,oldProp:n}),this.showCharCount&&this.countModule.refresh();break;case"valueTemplate":this.setValue(),this.showCharCount&&this.countModule.refresh();break;case"width":this.setWidth(t[o]),this.toolbarSettings.enable&&(this.toolbarModule.refreshToolbarOverflow(),this.resizeHandler());break;case"height":this.setHeight(t[o]),this.setContentHeight(),this.autoResize();break;case"readonly":this.setReadOnly(!1);break;case"cssClass":this.element.classList.remove(n[o]),this.setCssClass(t[o]);break;case"enabled":this.setEnable();break;case"enableRtl":this.updateRTL();break;case"placeholder":this.placeholder=t[o],this.setPlaceHolder();break;case"htmlAttributes":an(this.htmlAttributes,this,!1,!1);break;case"locale":e.prototype.refresh.call(this);break;case"maxLength":this.showCharCount&&this.countModule.refresh();break;case"showCharCount":t[o]&&this.countModule?this.countModule.renderCount():!1===t[o]&&this.countModule&&this.countModule.destroy();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify("model_changed",{newProp:t,oldProp:n});break;case"enableXhtml":this.notify("xhtmlValidation",{module:"XhtmlValidation",newProp:t,oldProp:n});break;default:this.notify("model-changed",{newProp:t,oldProp:n})}}},t.prototype.updateValueData=function(){this.enableHtmlEncode?this.setProperties({value:this.encode(bn(this.inputElement.innerHTML))},!0):this.setProperties({value:/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:bn(this.inputElement.innerHTML)})},t.prototype.removeSheets=function(e){var t;for(t=0;t<e.length;t++)ge(e[t])},t.prototype.updatePanelValue=function(){var e=this.value;(e=this.enableHtmlEncode&&this.value?bn(e):e)?(this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.trim()!==e.trim()&&(this.inputElement.innerHTML=e)):("HTML"===this.editorMode?this.inputElement.innerHTML="<p><br/></p>":this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule.refresh()},t.prototype.setHeight=function(e){this.element.style.height="auto"!==e?f(e):"auto"},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderWrapper||(this.placeHolderWrapper=this.createElement("span",{className:"rte-placeholder"}),this.inputElement&&this.inputElement.parentElement.insertBefore(this.placeHolderWrapper,this.inputElement),ye(this.placeHolderWrapper,{style:"font-size: 16px; padding: 16px; margin-left: 0px; margin-right: 0px;"})),this.placeHolderWrapper.innerHTML=this.placeholder,0!==this.inputElement.textContent.length||h(this.inputElement.firstChild)||"P"!==this.inputElement.firstChild.nodeName||h(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName?this.placeHolderWrapper.style.display="none":this.placeHolderWrapper.style.display="block"):this.inputElement.setAttribute("placeholder",this.placeholder))},t.prototype.setWidth=function(e){"auto"!==e?Ne(this.element,{width:f(this.width)}):this.element.style.width="auto"},t.prototype.setCssClass=function(e){h(e)||this.element.classList.add(e)},t.prototype.updateRTL=function(){this.notify("rtl-mode",{enableRtl:this.enableRtl}),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.updateReadOnly=function(){this.notify("readOnlyMode",{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unbindEvents():this.enabled&&this.bindEvents())},t.prototype.print=function(){var e,t=this,n={element:this.inputElement,requestType:"print",cancel:!1};this.trigger("actionBegin",n,(function(n){if(e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===Pe.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=function(e,t){var n=document.createElement("div"),r=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),i="";h(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),n.appendChild(e.cloneNode(!0));for(var o=0,a=r.length;o<a;o++)i+=r[o].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+i+"</head><body>"+n.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var s=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(s))}),500);return t}(t.inputElement,e),!n.cancel){t.trigger("actionComplete",{requestType:"print"})}}))},t.prototype.refreshUI=function(){this.renderModule.refresh()},t.prototype.showFullScreen=function(){this.readonly||this.fullScreenModule.showFullScreen()},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument())},t.prototype.initializeServices=function(){this.serviceLocator.register("rendererFactory",new Ot)},t.prototype.RTERender=function(){var e=this.serviceLocator.getService("rendererFactory");this.contentModule=e.getRenderer(Ct.Content),this.renderModule.render(),this.inputElement=this.contentModule.getEditPanel(),this.setHeight(this.height),an(this.htmlAttributes,this,!1,!0),this.setCssClass(this.cssClass),this.updateEnable(),this.setPlaceHolder(),this.updateRTL(),this.updateReadOnly(),this.updatePanelValue(),this.enableHtmlEncode&&!h(this.value)&&this.setProperties({value:this.encode(bn(this.value))})},t.prototype.setIframeSettings=function(){},t.prototype.isBlazor=function(){return!!g()},t.prototype.setValue=function(){if(this.valueTemplate)if("string"==typeof this.valueTemplate)this.setProperties({value:this.valueTemplate});else{r=this.valueTemplate,o=W.compile(r,i);for(var e=function(e,t,n,r,i,a){var s=o(e,t,n);if(g()&&!i){var l=r+U();if(G[r]||(G[r]=[]),h(a))e.BlazorTemplateId=l,G[r].push(e);else for(var d=0,c=Object.keys(G[r][a]);d<c.length;d++){var p=c[d];"BlazorTemplateId"!==p&&e[p]&&(G[r][a][p]=e[p]),"BlazorTemplateId"===p&&(l=G[r][a][p])}return"rowTemplate"===n?[de("tr",{id:l,className:"e-blazor-template"})]:[de("div",{id:l,className:"e-blazor-template"})]}return"string"==typeof s?q.test(s)?de("svg",{innerHTML:s}).childNodes:de(_.test(s)?"table":"div",{innerHTML:s}).childNodes:s}({}),t=0;t<e.length;t++){me([e[t]],this.element)}this.setProperties({value:this.element.innerHTML.trim()})}else{var n=!h(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\/?|\!?)(!--!--)>/g,"").trim();""!==n&&("TEXTAREA"===this.element.tagName?this.setProperties({value:bn(n)}):this.setProperties({value:n}))}var r,i,o},t.prototype.setContentHeight=function(e,t){var n,r,i,o=0,a=this.sourceCodeModule.getPanel()&&"block"===this.sourceCodeModule.getPanel().parentElement.style.display?this.sourceCodeModule.getPanel().parentElement:this.contentModule.getPanel(),s=this.element.offsetHeight;0!==this.element.offsetHeight||"auto"===this.height||this.getToolbar()||(s=parseInt(this.height,10),(i="string"==typeof this.height&&this.height.indexOf("%")>-1)&&(r=this.height));var l=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,d=this.enableResize?this.element.querySelector(".e-resize-handle").offsetHeight+8:0,c=this.getToolbar()?this.toolbarModule.getExpandTBarPopHeight():0;(this.toolbarSettings.type===Nt.Expand&&t&&"preview"!==e?(n="auto"===this.height&&0===d?"auto":s-(l+c+d)+"px",o=this.toolbarSettings.enableFloating?0:c):n="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")?i?r:s-(l+d)+"px":"auto",Ne(a,{height:n,marginTop:o+"px"}),this.iframeSettings.enable&&"sourceCode"===e)&&Ne(ve(".e-rte-content",this.element),{height:n,marginTop:o+"px"});this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable&&Ne(this.getToolbar().parentElement,t?{height:l+c+"px"}:{height:l+"px"}),0===d&&this.autoResize()},t.prototype.getHtml=function(){return this.value},t.prototype.showSourceCode=function(){this.readonly||this.notify("sourceCode",{})},t.prototype.getCharCount=function(){return("Markdown"===this.editorMode?this.inputElement.value.trim():this.inputElement.textContent.trim()).length},t.prototype.getBaseToolbarObject=function(){},t.prototype.getToolbar=function(){return this.toolbarModule?this.toolbarModule.getToolbarElement():null},t.prototype.getToolbarElement=function(){return this.toolbarModule&&this.toolbarModule.getToolbarElement()},t.prototype.getID=function(){return"TEXTAREA"===this.originalElement.tagName?this.valueContainer.id:this.element.id},t.prototype.mouseDownHandler=function(e){var t=e.touches?e.changedTouches[0]:e;ce([this.element],["e-focused"]),this.preventDefaultResize(e),this.notify("mouseDown",{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}},t.prototype.preventImgResize=function(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.preventDefaultResize=function(e){"msie"===Pe.info.name?this.contentModule.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize):"mozilla"===Pe.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!1,"false"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!1,"false"))},t.prototype.defaultResize=function(e){"msie"===Pe.info.name?this.contentModule.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):"mozilla"===Pe.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!0,"true"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!0,"true"))},t.prototype.resizeHandler=function(){this.setContentHeight("",!1)},t.prototype.scrollHandler=function(e){this.notify("scroll",{args:e})},t.prototype.contentScrollHandler=function(e){this.notify("contentscroll",{args:e})},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,ce([this.element],["e-focused"]),"HTML"===this.editorMode?this.cloneValue="<p><br></p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(bn(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=""===this.inputElement.value?null:this.inputElement.value;document.activeElement;this.preventDefaultResize(e),this.trigger("focus",{event:e,isInteracted:0!==Object.keys(e).length}),y.add(document,"mousedown",this.onDocumentClick,this)}},t.prototype.getUpdatedValue=function(){return"HTML"===this.editorMode?"<p><br></p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(bn(this.inputElement.innerHTML)):this.inputElement.innerHTML:""===this.inputElement.value?null:this.inputElement.value},t.prototype.updateValueOnIdle=function(){this.setProperties({value:this.getUpdatedValue()},!0),this.valueContainer.value=this.value,this.invokeChangeEvent()},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.contentChanged=function(){!h(this.saveInterval)&&this.saveInterval>0&&(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval))},t.prototype.onDocumentClick=function(e){var t=e.target,n=Ce(t,".e-richtexteditor");this.element.contains(e.target)||document===e.target||n===this.element||Ce(t,'[aria-owns="'+this.getID()+'"]')||(this.isBlur=!0,this.isRTE=!1),this.notify("docClick",{args:e})},t.prototype.blurHandler=function(e){var t=e.relatedTarget;if(t){var n=Ce(t,".e-richtexteditor");n&&n===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):Ce(t,'[aria-owns="'+this.getID()+'"]')?this.isBlur=!1:(this.isBlur=!0,t=null)}if(this.isBlur&&h(t)){he([this.element],["e-focused"]),this.notify("focusChange",{});var r=this.getUpdatedValue();this.setProperties({value:r}),this.notify("toolbar-refresh",{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,fn(this.valueContainer,"focusout"),this.defaultResize(e),this.trigger("blur",{event:e,isInteracted:0!==Object.keys(e).length}),h(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),y.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0},t.prototype.invokeChangeEvent=function(){var e={value:this.value};this.value!==this.cloneValue&&(this.trigger("change",e),this.cloneValue=this.value)},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=bt(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var n=t[e];y.add(n,"scroll",this.scrollHandler,this)}},t.prototype.wireContextEvent=function(){},t.prototype.unWireContextEvent=function(){},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=bt(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var n=t[e];y.remove(n,"scroll",this.scrollHandler)}},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim();this.setProperties({value:""===e?null:this.isBlazor()?this.defaultResetValue:e})},t.prototype.autoResize=function(){"auto"===this.height||(this.inputElement.style.overflow=null)},t.prototype.setAutoHeight=function(e){h(e)||(e.style.height="",e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")},t.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.readonly&&this.enabled||this.bindEvents()},t.prototype.restrict=function(e){if(this.maxLength>=0){for(var t="Markdown"===this.editorMode?this.contentModule.getText():e.currentTarget.textContent.trim(),n=[8,16,17,37,38,39,40,46,65],r=void 0,i=0;i<=n.length-1;i++)if(e.which===n[i]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(r=n[i])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==r&&e.preventDefault()}},t.prototype.bindEvents=function(){this.keyboardModule=new Tt(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:Nn({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=Ce(this.valueContainer,"form");e&&y.add(e,"reset",this.resetHandler,this),y.add(this.inputElement,"keyup",this.keyUp,this),y.add(this.inputElement,"paste",this.onPaste,this),y.add(this.inputElement,Pe.touchEndEvent,u(this.mouseUp,30),this),y.add(this.inputElement,Pe.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on("keydown-handler",this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.wireScrollElementsEvents()},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.notify("iframe-click",e)},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}!e.callBack||"copy"!==e.event.action&&"cut"!==e.event.action&&"delete"!==e.event.action||e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.readonly&&this.enabled||this.unbindEvents()},t.prototype.unbindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=Ce(this.valueContainer,"form");e&&y.remove(e,"reset",this.resetHandler),y.remove(this.inputElement,"keyup",this.keyUp),y.remove(this.inputElement,"paste",this.onPaste),y.remove(this.inputElement,Pe.touchEndEvent,u(this.mouseUp,30)),y.remove(this.inputElement,Pe.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off("keydown-handler",this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.unWireScrollElementsEvents()},En([Fe({},qt)],t.prototype,"toolbarSettings",void 0),En([Fe({},Vt)],t.prototype,"quickToolbarSettings",void 0),En([Fe({},Wt)],t.prototype,"pasteCleanupSettings",void 0),En([Fe({},tn)],t.prototype,"iframeSettings",void 0),En([Fe({},Gt)],t.prototype,"insertImageSettings",void 0),En([Fe({},Ut)],t.prototype,"tableSettings",void 0),En([je(0)],t.prototype,"floatingToolbarOffset",void 0),En([Fe({},on)],t.prototype,"inlineMode",void 0),En([je("100%")],t.prototype,"width",void 0),En([je(!1)],t.prototype,"enablePersistence",void 0),En([je(!1)],t.prototype,"enableResize",void 0),En([je({})],t.prototype,"htmlAttributes",void 0),En([je(null)],t.prototype,"placeholder",void 0),En([je(!1)],t.prototype,"readonly",void 0),En([je(!0)],t.prototype,"enabled",void 0),En([je(!0)],t.prototype,"enableHtmlSanitizer",void 0),En([je(!1)],t.prototype,"enableHtmlEncode",void 0),En([je(!1)],t.prototype,"enableXhtml",void 0),En([je("auto")],t.prototype,"height",void 0),En([je(null)],t.prototype,"cssClass",void 0),En([je(null)],t.prototype,"value",void 0),En([je(30)],t.prototype,"undoRedoSteps",void 0),En([je(300)],t.prototype,"undoRedoTimer",void 0),En([je("HTML")],t.prototype,"editorMode",void 0),En([je(null)],t.prototype,"keyConfig",void 0),En([je(!1)],t.prototype,"showCharCount",void 0),En([je(!1)],t.prototype,"enableTabKey",void 0),En([je(!1)],t.prototype,"enableAutoUrl",void 0),En([je(-1)],t.prototype,"maxLength",void 0),En([Fe({},Xt)],t.prototype,"format",void 0),En([Fe({},Kt)],t.prototype,"fontFamily",void 0),En([Fe({},Jt)],t.prototype,"fontSize",void 0),En([Fe({},$t)],t.prototype,"fontColor",void 0),En([Fe({},Yt)],t.prototype,"backgroundColor",void 0),En([je(null)],t.prototype,"valueTemplate",void 0),En([je(1e4)],t.prototype,"saveInterval",void 0),En([je(1)],t.prototype,"saveIdleOnKeyPress",void 0),En([ze()],t.prototype,"actionBegin",void 0),En([ze()],t.prototype,"actionComplete",void 0),En([ze()],t.prototype,"beforeDialogOpen",void 0),En([ze()],t.prototype,"dialogOpen",void 0),En([ze()],t.prototype,"dialogClose",void 0),En([ze()],t.prototype,"beforeQuickToolbarOpen",void 0),En([ze()],t.prototype,"quickToolbarOpen",void 0),En([ze()],t.prototype,"quickToolbarClose",void 0),En([ze()],t.prototype,"toolbarStatusUpdate",void 0),En([ze()],t.prototype,"imageSelected",void 0),En([ze()],t.prototype,"imageUploading",void 0),En([ze()],t.prototype,"imageUploadSuccess",void 0),En([ze()],t.prototype,"imageUploadFailed",void 0),En([ze()],t.prototype,"imageRemoving",void 0),En([ze()],t.prototype,"afterImageDelete",void 0),En([ze()],t.prototype,"created",void 0),En([ze()],t.prototype,"destroyed",void 0),En([ze()],t.prototype,"beforeSanitizeHtml",void 0),En([ze()],t.prototype,"blur",void 0),En([ze()],t.prototype,"toolbarClick",void 0),En([ze()],t.prototype,"focus",void 0),En([ze()],t.prototype,"change",void 0),En([ze()],t.prototype,"resizing",void 0),En([ze()],t.prototype,"resizeStart",void 0),En([ze()],t.prototype,"resizeStop",void 0),En([je(null)],t.prototype,"formatter",void 0),t=En([_e],t)}(vt),Sn=function(){function e(){}return e.prototype.process=function(e,t,n,r){var i,o=this,a=e.contentModule.getDocument().getSelection(),s=a.rangeCount>0?a.getRangeAt(a.rangeCount-1):null;if("HTML"===e.editorMode&&(i=this.editorManager.nodeSelection.save(s,e.contentModule.getDocument())),h(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||!s||e.contentModule.getEditPanel().contains(this.getAncestorNode(s.commonAncestorContainer))||e.contentModule.getEditPanel()===s.commonAncestorContainer||e.contentModule.getPanel()===s.commonAncestorContainer){if(h(t)){var l=n.action;if("tab"!==l&&"enter"!==l&&"space"!==l&&"escape"!==l){t={},"Markdown"===e.editorMode&&"insert-table"===l&&(r={headingText:e.localeObj.getConstant("TableHeadingText"),colText:e.localeObj.getConstant("TableColText")});var d={originalEvent:n,cancel:!1,requestType:l||n.key+"Key",itemCollection:r};c(t,t,d,!0),g()&&(delete t.item,delete t.itemCollection),e.trigger("actionBegin",t,(function(e){e.cancel&&("paste"!==l&&"cut"!==l&&"copy"!==l||n.preventDefault())}))}var p=!!h(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===n.which&&p||9!==n.which)&&this.editorManager.observer.notify("keydown"===n.type?"keydown":"keyup",{event:n,callBack:this.onSuccess.bind(this,e),value:r})}else!h(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(c(t,t,{requestType:t.item.subCommand,cancel:!1,itemCollection:r},!0),e.trigger("actionBegin",t,(function(a){if(!a.cancel){0===o.getUndoRedoStack().length&&"Links"!==a.item.command&&"Images"!==a.item.command&&o.saveData(),e.isBlur=!1,e.contentModule.getEditPanel().focus(),"HTML"===e.editorMode&&i.restore();var s=a.item.subCommand.toLocaleLowerCase();"paste"===s||"cut"===s||"copy"===s?e.clipboardAction(s,n):(o.editorManager.observer.notify("checkUndoStack",{subCommand:a.item.subCommand}),o.editorManager.execCommand(a.item.command,a.item.subCommand,n,o.onSuccess.bind(o,e),a.item.value,"Pre"===a.item.subCommand&&"dropDownSelect"===t.name?{name:t.name}:r,"#"+e.getID()+" iframe"))}})));(h(n)||n&&"copy"!==n.action)&&this.enableUndo(e)}},e.prototype.getAncestorNode=function(e){return e=3===e.nodeType?e.parentNode:e},e.prototype.onKeyHandler=function(e,t){var n=this;this.editorManager.observer.notify("keyup",{event:t,callBack:function(){e.contentChanged(),n.enableUndo(e)}})},e.prototype.onSuccess=function(e,t){(h(t.event)||t&&"copy"!==t.event.action)&&("undo"!==t.event.action&&"redo"!==t.event.action||e.contentChanged(),this.enableUndo(e),e.notify("execCommandCallBack",t)),e.trigger("actionComplete",t,(function(t){if(e.setPlaceHolder(),"Images"===t.requestType||"Links"===t.requestType&&"HTML"===e.editorMode){var n=t;if("Links"===t.requestType&&t.event&&"keydown"===t.event.type&&32===t.event.keyCode)return;e.notify("insertCompleted",{args:n.event,type:t.requestType,isNotify:!0,elements:n.elements})}e.autoResize()}))},e.prototype.saveData=function(e){this.editorManager.undoRedoManager.saveData(e)},e.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},e.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},e.prototype.enableUndo=function(e){var t=this.getUndoStatus();!e.inlineMode.enable||Pe.isDevice&&!un()?e.toolbarModule&&(mn(e.toolbarModule.baseToolbar,t),e.trigger("toolbarStatusUpdate",t)):(mn(e.quickToolbarModule.inlineQTBar.quickTBarObj,t),e.trigger("toolbarStatusUpdate",t))},e}(),wn=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],xn=["td","th"],Tn=["table","tbody","td","tfoot","th","thead","tr"],Ln=function(){function e(){this.startNodeName=[],this.endNodeName=[]}return e.prototype.saveInstance=function(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this},e.prototype.documentFromRange=function(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument},e.prototype.getRange=function(e){var t=this.get(e),n=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return n.startContainer!==e||n.endContainer!==e||n.startOffset||n.endOffset||(n.setStart(e.body,0),n.collapse(!0)),n},e.prototype.get=function(e){return e.defaultView.getSelection()},e.prototype.save=function(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)},e.prototype.getIndex=function(e){var t=0;if(e=e.previousSibling||"BR"!==e.tagName?e.previousSibling:e)for(e.nodeType;e;null)t++,e.nodeType,e=e.previousSibling;return t},e.prototype.isChildNode=function(e,t){for(var n=0;n<t.childNodes.length;n++)if(e.indexOf(t.childNodes[n])>-1)return!0;return!1},e.prototype.getNode=function(e,t,n){return t!==e||3!==e.nodeType&&e.firstChild&&-1===n.indexOf(e.firstChild)&&!this.isChildNode(n,e)?-1===n.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(n,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null},e.prototype.getNodeCollection=function(e){var t=e.startContainer.childNodes[e.startOffset]||e.startContainer,n=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if(t===n&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&"PRE"===e.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];var r=[];do{-1===r.indexOf(t)&&r.push(t),t=this.getNode(t,n,r)}while(t);return r},e.prototype.getParentNodeCollection=function(e){return this.getParentNodes(this.getNodeCollection(e),e)},e.prototype.getParentNodes=function(e,t){e=e.reverse();for(var n=0;n<e.length;n++)-1!==e.indexOf(e[n].parentNode)||3===e[n].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(n,1),n--):3===e[n].nodeType&&(e[n]=e[n].parentNode);return e},e.prototype.getSelectionNodeCollection=function(e){return this.getSelectionNodes(this.getNodeCollection(e))},e.prototype.getSelectionNodeCollectionBr=function(e){return this.getSelectionNodesBr(this.getNodeCollection(e))},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),n=0;n<e.length;n++)(3!==e[n].nodeType||""===e[n].textContent.trim()||1===e[n].textContent.length&&e[n].textContent.match(t))&&(e.splice(n,1),n--);return e.reverse()},e.prototype.getSelectionNodesBr=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),n=0;n<e.length;n++)"BR"!==e[n].nodeName&&(3!==e[n].nodeType||""===e[n].textContent.trim()||1===e[n].textContent.length&&e[n].textContent.match(t))&&(e.splice(n,1),n--);return e.reverse()},e.prototype.getInsertNodeCollection=function(e){return this.getInsertNodes(this.getNodeCollection(e))},e.prototype.getInsertNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&""===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()},e.prototype.getNodeArray=function(e,t,n){var r=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(n||this.rootNode);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),r.push(this.getIndex(e)),e=e.parentNode;return r},e.prototype.setRangePoint=function(e,t,n,r){for(var i=this.rootNode,o=n.length,a=r;o--;null)i=i&&i.childNodes[n[o]];return i&&a>=0&&e[t?"setStart":"setEnd"](i,a),e},e.prototype.restore=function(){var e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e},e.prototype.selectRange=function(e,t){this.setRange(e,t),this.save(t,e)},e.prototype.setRange=function(e,t){var n=this.get(e);n.removeAllRanges(),n.addRange(t)},e.prototype.setSelectionText=function(e,t,n,r,i){var o=e.createRange();o.setStart(t,r),o.setEnd(n,i),this.setRange(e,o)},e.prototype.setSelectionContents=function(e,t){var n=e.createRange();n.selectNode(t),this.setRange(e,n)},e.prototype.setSelectionNode=function(e,t){var n=e.createRange();n.selectNodeContents(t),this.setRange(e,n)},e.prototype.getSelectedNodes=function(e){return this.getNodeCollection(this.getRange(e))},e.prototype.Clear=function(e){this.get(e).removeAllRanges()},e.prototype.insertParentNode=function(e,t,n){n.surroundContents(t),this.selectRange(e,n)},e.prototype.setCursorPoint=function(e,t,n){var r=e.createRange(),i=e.defaultView.getSelection();r.setStart(t,n),r.collapse(!0),i.removeAllRanges(),i.addRange(r)},e}(),kn={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46"},Dn=["BR","IMG"],On="e-editor-select-start",Pn="e-editor-select-end",Rn=function(){function e(e,t){this.parent=e,this.nodeSelection=new Ln,this.currentDocument=t}return e.prototype.contents=function(e){return e&&"IFRAME"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&wn.indexOf(e.tagName.toLowerCase())>=0},e.prototype.isLink=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()},e.prototype.blockParentNode=function(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,"e-node-inner"));null)if(e=e.parentNode,this.isBlockNode(e))return e;return e},e.prototype.rawAttributes=function(e){var t={},n=e.attributes;if(n.length>0)for(var r=0;r<n.length;r++){var i=n[r];t[i.nodeName]=i.value}return t},e.prototype.attributes=function(e){if(!e)return"";for(var t="",n=this.rawAttributes(e),r=Object.keys(n).sort(),i=0;i<r.length;i++){var o=r[i],a=n[o];a.indexOf("'")<0&&a.indexOf('"')>=0?t+=" "+o+"='"+a+"'":a.indexOf('"')>=0&&a.indexOf("'")>=0?t+=" "+o+'="'+(a=a.replace(/"/g,"&quot;"))+'"':t+=" "+o+'="'+a+'"'}return t},e.prototype.clearAttributes=function(e){for(var t=e.attributes,n=t.length-1;n>=0;n--){var r=t[n];e.removeAttribute(r.nodeName)}},e.prototype.openTagString=function(e){return"<"+e.tagName.toLowerCase()+this.attributes(e)+">"},e.prototype.closeTagString=function(e){return"</"+e.tagName.toLowerCase()+">"},e.prototype.createTagString=function(e,t,n){return"<"+e.toLowerCase()+this.attributes(t)+">"+n+"</"+e.toLowerCase()+">"},e.prototype.isList=function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},e.prototype.isElement=function(e){return e===this.parent},e.prototype.isEditable=function(e){return(!e.getAttribute||"true"===e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},e.prototype.hasClass=function(e,t){return e&&e.classList&&e.classList.contains(t)},e.prototype.replaceWith=function(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),ge(e)},e.prototype.parseHTMLFragment=function(e){var t=de("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)},e.prototype.wrap=function(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.wrapInner=function(e,t){for(e.appendChild(t),(t=e.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");e.firstChild!==t;)t.appendChild(e.firstChild);return t},e.prototype.unWrap=function(e){for(var t=e.parentNode,n=[];e.firstChild;)n.push(e.firstChild),t.insertBefore(e.firstChild,e);return n=n.length>0?n:[e.parentNode],t.removeChild(e),n},e.prototype.getSelectedNode=function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(On)||e.childNodes[t-1].classList.contains(Pn))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e},e.prototype.nodeFinds=function(e,t){for(var n=[],r=0;r<t.length;r++)e.contains(t[r])&&e!==t[r]&&n.push(t[r]);return n},e.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},e.prototype.getRangePoint=function(e){var t=this.getSelection(),n=[];if(t&&t.getRangeAt&&t.rangeCount){n=[];for(var r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r))}else n=[this.currentDocument.createRange()];return void 0!==e?n[e]:n},e.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},e.prototype.getPreviousNode=function(e){for(e=e.previousElementSibling;e&&"\n"===e.textContent;null)e=e.previousElementSibling;return e},e.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},e.prototype.saveMarker=function(e,t){var n,r,i=this.parent.querySelector("."+On),o=this.parent.querySelector("."+Pn);if(""===i.textContent&&h(o)&&"tab"!==t&&(1===i.childNodes.length&&"BR"===i.childNodes[0].nodeName?i.innerHTML="&#65279;&#65279;<br>":i.innerHTML="&#65279;&#65279;"),this.hasClass(i,On)&&i.classList.length>1){var a=this.createTagString("p",i,this.encode(i.textContent));this.replaceWith(i,a),(i=this.parent.querySelector("."+On)).classList.remove(On),n=i.childNodes[0]}else n=this.unWrap(i)[0];if(this.hasClass(o,Pn)&&o.classList.length>1){a=this.createTagString("p",o,this.encode(o.textContent));this.replaceWith(o,a),(o=this.parent.querySelector("."+Pn)).classList.remove(Pn),r=o.childNodes[0]}else r=o?this.unWrap(o)[0]:n;return e.startContainer=e.getNodeArray(n,!0),e.endContainer=e.getNodeArray(r,!1),e},e.prototype.marker=function(e,t){return'<span class="'+e+'">'+t+"</span>"},e.prototype.setMarker=function(e){var t=e.range,n=t.startContainer.childNodes[t.startOffset]||t.startContainer,r=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(n.nodeType===Node.ELEMENT_NODE&&r.nodeType===Node.ELEMENT_NODE&&(n.contains(r)||r.contains(n))){var i=n.contains(r)?n:r;if(i.nodeType!==Node.TEXT_NODE){for(var o=[],a=[],s=i;i.contains(s);null)o.indexOf(s)<0&&s.childNodes&&s.childNodes.length?(o.push(s),s=s.childNodes[0]):s.nextSibling?s=s.nextSibling:s.parentNode&&(s=s.parentNode,o.push(s)),a.indexOf(s)<0&&(s.nodeType===Node.TEXT_NODE||xn.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===s.tagName||"IMG"===s.tagName))&&a.push(s);a.length&&(n=n.contains(r)?a[0]:n,r=a[a.length-1])}}if(n!==r){if(n.nodeType!==Node.TEXT_NODE&&("BR"===n.tagName&&xn.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===n.tagName))this.replaceWith(n,this.marker(On,this.encode(n.textContent))),t.startContainer.querySelector("."+On).appendChild(n);else this.replaceWith(n,this.marker(On,this.encode(n.textContent)));if(r.nodeType!==Node.TEXT_NODE&&"BR"===r.tagName&&xn.indexOf(r.parentNode.tagName.toLocaleLowerCase())>=0)this.replaceWith(r,this.marker(Pn,this.encode(r.textContent))),t.endContainer.querySelector("."+Pn).appendChild(r);else this.ensureSelfClosingTag(r,Pn,t)}else this.ensureSelfClosingTag(n,On,t)},e.prototype.ensureSelfClosingTag=function(e,t,n){var r=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.tagName){this.replaceWith(e,this.marker(On,this.encode(e.textContent))),n.startContainer.querySelector("."+On).appendChild(e)}else{if("IMG"===e.tagName){var i=document.createElement("p");e.parentElement.insertBefore(i,e),i.appendChild(e),e=i.children[0]}if("TABLE"===e.tagName)if(r=!0,""===e.textContent){var o=e.querySelectorAll("td");e=h((e=o[o.length-1]).childNodes[0])?e:e.childNodes[0]}else{for(var a=e.lastChild;3!==a.nodeType&&"#text"!==a.nodeName&&"BR"!==a.nodeName;)a=a.lastChild;e=a}for(var s=0;s<Dn.length;s++)e=e.tagName!==Dn[s]||r?e:e.parentNode;if(3===e.nodeType&&"#text"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.nodeName){this.replaceWith(e,this.marker(Pn,this.encode(e.textContent))),n.endContainer.querySelector("."+Pn).appendChild(e)}else{var l=this.marker(t,"");me([this.parseHTMLFragment(l)],e)}}},e.prototype.createTempNode=function(e){var t=e.textContent;if("BR"===e.tagName){var n="<p></p>",r=e.parentNode;xn.indexOf(r.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(n)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(On)||e.classList.contains(Pn))||t.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||t.length&&t.indexOf("\n")<0){n="<p></p>";var i=e;e=this.wrap(e,this.parseHTMLFragment(n)),!(i.nodeType===Node.ELEMENT_NODE&&i.firstChild&&"BR"===i.firstChild.nodeName&&(i.classList.contains(On)||i.classList.contains(Pn)))&&e.nextElementSibling&&"BR"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e},e.prototype.getImageTagInSelection=function(){var e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll("img"):null},e.prototype.blockNodes=function(){var e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount)for(var n=this.getRangePoint(),r=0;r<n.length;r++){var i=void 0,o=n[r],a=this.getSelectedNode(o.startContainer,o.startOffset),s=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(a)&&e.indexOf(a)<0&&e.push(a),(i=this.blockParentNode(a))&&e.indexOf(i)<0)if(xn.indexOf(i.tagName.toLocaleLowerCase())>=0&&("BR"===a.tagName||a.nodeType===Node.TEXT_NODE||a.classList.contains(On)||a.classList.contains(Pn))){var l=a.previousSibling&&a.previousSibling.nodeType===Node.TEXT_NODE?a.previousSibling:a;a.nextSibling||a.previousSibling||"BR"!==a.tagName?e.push(this.createTempNode(l)):e.push(l)}else e.push(i);for(var d=[],c=a;c!==s&&c!==this.parent;null)d.indexOf(c)<0&&c.childNodes&&c.childNodes.length?(d.push(c),c=c.childNodes[0]):c&&8!==c.nodeType&&("BR"===c.tagName||c.nodeType===Node.TEXT_NODE&&""!==c.textContent.trim()||c.nodeType!==Node.TEXT_NODE&&(c.classList.contains(On)||c.classList.contains(Pn)))&&xn.indexOf(c.parentNode.tagName.toLocaleLowerCase())>=0?c=this.createTempNode(c):c.nextSibling&&8!==c.nextSibling.nodeType&&("BR"===c.nextSibling.tagName||c.nextSibling.nodeType===Node.TEXT_NODE||c.nextSibling.classList.contains(On)||c.nextSibling.classList.contains(Pn))&&xn.indexOf(c.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?c=this.createTempNode(c.nextSibling):c.nextSibling?c=c.nextSibling:c.parentNode&&(c=c.parentNode,d.push(c)),e.indexOf(c)<0&&c.nodeType===Node.ELEMENT_NODE&&xn.indexOf(c.parentNode.tagName.toLocaleLowerCase())>=0&&(c.classList.contains(On)||c.classList.contains(Pn))&&e.push(this.createTempNode(c)),this.isBlockNode(c)&&this.ignoreTableTag(c)&&d.indexOf(c)<0&&e.indexOf(c)<0&&(c!==s||o.endOffset>0)&&e.push(c),"IMG"===c.nodeName&&"true"===c.parentElement.contentEditable&&e.push(c);(i=this.blockParentNode(s))&&this.ignoreTableTag(i)&&e.indexOf(i)<0&&!h(i.previousElementSibling)&&"IMG"!==i.previousElementSibling.tagName&&e.push(i)}for(var p=e.length-1;p>0;p--){if((d=this.nodeFinds(e[p],e)).length){var u=e[p].querySelectorAll("ul, ol");if("LI"===e[p].tagName&&u.length>0)continue;e.splice(p,1)}}return e},e.prototype.ignoreTableTag=function(e){return!(Tn.indexOf(e.tagName.toLocaleLowerCase())>=0)},e}(),An=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function Hn(){var e=!1;return Pe.isDevice&&Pe.isIos&&(e=!0),e}function In(e,t){if("BODY"===e.nodeName&&!h(t)){var n=top.window.document.querySelector(t);h(n)||n.contentWindow.focus()}}var Bn=function(){function e(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("list-type",this.applyListsHandler,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.testList=function(e){var t=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],n=h(e)?null:e.innerText.trim().split(".")[0]+".";if(!h(n))for(var r=0;r<t.length;r++)if(t[r].test(n))return!0;return!1},e.prototype.testCurrentList=function(e){var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!h(e.startContainer.textContent.slice(0,e.startOffset)))for(var n=0;n<t.length;n++)if(t[n].test(e.startContainer.textContent.slice(0,e.startOffset)))return!0;return!1},e.prototype.spaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var n=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),r=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),n.previousElementSibling),i=n.nextElementSibling,o=h(r)?null:r.innerText.trim().substring(0,1),a=h(i)?null:i.innerText.trim().substring(0,1),s=this.testCurrentList(t),l=this.testList(r),d=this.testList(i);l||d||"*"===o||"*"===a||(s?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault()):"*"===t.startContainer.textContent.slice(0,t.startOffset)&&(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()))},e.prototype.enterList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);n===this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset)&&"LI"===n.tagName&&""===n.textContent.trim()&&65279===n.textContent.charCodeAt(0)&&(n.textContent="")},e.prototype.keyDownHandler=function(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),9===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);e.event.action&&"indent"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument));var n=void 0,r=t.startOffset,i=t.endOffset,o=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);if(o===this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset)&&("BR"===o.nodeName||"#text"===o.nodeName)&&xn.indexOf(o.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&"indent"===e.event.action||this.domNode.setMarker(this.saveSelection),n=this.domNode.blockNodes();for(var a=[],s=!0,l=0;l<n.length;l++)"LI"===n[l].parentNode.tagName?a.push(n[l].parentNode):"LI"===n[l].tagName&&"P"!==n[l].childNodes[0].tagName&&"OL"!==n[l].childNodes[0].tagName&&"UL"!==n[l].childNodes[0].tagName&&a.push(n[l]);a.length>1||a.length&&(0===r&&0===i||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(a[0]),e.event.shiftKey?(this.revertList(a),this.revertClean()):s=this.nestedList(a),s&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&"indent"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&"indent"===e.event.action||(e.event&&e.event.shiftKey&&"Tab"===e.event.key&&(e.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getAction=function(e){return"OL"===e.parentNode.nodeName?"OL":"UL"},e.prototype.revertClean=function(){for(var e=this.parent.editableElement.querySelectorAll("ul, ol"),t=0;t<e.length;t++){var n=e[t].querySelectorAll("ul, ol");if(n.length>0)for(var r=0;r<n.length;r++){var i=n[r].previousSibling;i&&"LI"===i.tagName&&i.appendChild(n[r])}}},e.prototype.noPreviousElement=function(e){var t,n,r=e.querySelectorAll("ol, ul"),i=e.querySelectorAll("li"),o=this.domNode.contents(i[0])[0];if(i.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?t=i[0]:n=r[0],t)for(var a=this.domNode.contents(e)[0];a&&!this.domNode.isList(a);null){var s=a.nextSibling;ue([a],t),Ne(e,{"list-style-type":"none"}),Ne(t,{"list-style-type":""}),a=s}else if(n){ue([d=de("li")],n);for(a=this.domNode.contents(e)[0];a&&!this.domNode.isList(a);null){s=a.nextSibling;d.appendChild(a),a=s}ue([n],e.parentNode),ge(e),ue([l=de("li",{styles:"list-style-type: none;"})],n.parentNode),me([n],l)}else{var l,d;ue([l=de("li",{styles:"list-style-type: none;"})],e.parentNode),ue([d=de(e.parentNode.tagName)],l),me([e],d)}},e.prototype.nestedList=function(e){for(var t=!1,n=0;n<e.length;n++){var r=this.domNode.getPreviousNode(e[n]);if(r){t=!0;var i=void 0,o=void 0,a=e[n].querySelectorAll("ol, ul"),s=e[n].querySelectorAll("li"),l=this.domNode.contents(s[0])[0];if(s.length>0&&("OL"===l.nodeName||"UL"===l.nodeName)?o=s[0]:i=a[0],i){ue([h=de("li")],i);for(var d=this.domNode.contents(e[n])[0];d&&!this.domNode.isList(d);null){var c=d.nextSibling;h.appendChild(d),d=c}me([i],r),ge(e[n])}else if(o){if("LI"===r.tagName){for(d=this.domNode.contents(e[n])[0];d&&!this.domNode.isList(d);null){c=d.nextSibling;ue([d],o),Ne(e[n],{"list-style-type":"none"}),Ne(o,{"list-style-type":""}),d=c}me([o.parentNode],r),ge(e[n])}}else{var h;if("LI"===r.tagName)me([h=de(e[n].parentNode.tagName)],r),me([e[n]],h)}}else{var p=e[n];t=!0,this.noPreviousElement(p)}}return t},e.prototype.applyListsHandler=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.domNode.setMarker(this.saveSelection);for(var n=this.domNode.blockNodes(),r=0;r<n.length;r++)"TABLE"===n[r].tagName&&n.splice(r,1),"LI"!==n[r].tagName&&"LI"===n[r].parentNode.tagName&&(n[r]=n[r].parentNode);this.applyLists(n,this.currentAction,e.selector),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.applyLists=function(e,t,n){if(this.isRevert(e,t))this.revertList(e),this.removeEmptyListElements();else{this.checkLists(e,t);for(var r=0;r<e.length;r++)if("LI"!==e[r].tagName){!1;var i="<"+t+">",o="</"+t+">",a="li"+("IMG"===e[r].tagName?"":this.domNode.attributes(e[r])),s="p"===e[r].tagName.toLowerCase()?e[r].innerHTML:e[r].outerHTML,l=i+this.domNode.createTagString(a,null,s)+o;this.domNode.replaceWith(e[r],l)}}this.cleanNode(),this.parent.editableElement.focus(),Hn()&&In(this.parent.editableElement,n),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},e.prototype.removeEmptyListElements=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&ge(e[t])},e.prototype.isRevert=function(e,t){for(var n=!0,r=0;r<e.length;r++){if("LI"!==e[r].tagName)return!1;e[r].parentNode.tagName!==t&&(n=!1)}return n},e.prototype.checkLists=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r].parentNode;"LI"===e[r].tagName&&i.tagName!==t&&n.indexOf(i)<0&&n.push(i)}for(var o=n.length-1;o>=0;o--){var a=n[o],s="<"+t.toLowerCase()+" "+this.domNode.attributes(a)+">"+a.innerHTML+"</"+t.toLowerCase()+">";this.domNode.replaceWith(n[o],s)}},e.prototype.cleanNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var n=e[t];if(this.domNode.isList(n.previousElementSibling)&&this.domNode.openTagString(n)===this.domNode.openTagString(n.previousElementSibling)){for(var r=this.domNode.contents(n),i=0;i<r.length;i++)n.previousElementSibling.appendChild(r[i]);n.parentNode.removeChild(n)}}},e.prototype.findUnSelected=function(e,t){if((e=e.slice().reverse()).length>0){var n=[],r=[],i=[],o=[];i=t[t.length-1].childNodes;for(var a=0;a<i.length;a++)if("OL"===i[a].tagName||"UL"===i[a].tagName){var s=i[a].querySelectorAll("li");if(s.length>0)for(var l=0;l<s.length;l++)o.push(s[l])}for(var d=0;d<o.length;d++){for(var c=0,h=0;h<e.length;h++)o[d].contains(e[h])||(c+=1);c===e.length&&r.push(o[d])}if(r.length>0)for(var p=0;p<r.length;p++)"OL"!==this.domNode.contents(r[p])[0].nodeName&&"UL"!==this.domNode.contents(r[p])[0].nodeName&&n.push(r[p]);n.length>0&&this.nestedList(n)}},e.prototype.revertList=function(e){for(var t=[],n=e.length-1;n>=0;n--)for(var r=n-1;r>=0;r--)if(e[r].contains(e[n])||e[r]===e[n]){t.push(e[n]),e.splice(n,1);break}this.findUnSelected(t,e);var i=[];for(n=0;n<e.length;n++){var o=e[n];3===this.domNode.contents(o)[0].nodeType&&0===this.domNode.contents(o)[0].textContent.trim().length&&ge(this.domNode.contents(o)[0]);var a=e[n].parentNode,s=o.getAttribute("class");if(0===t.length){var l=e[n].querySelectorAll("ul, ol")[0];if(l)if(l.querySelectorAll("li")){var d=de(l.tagName);me([d],l.parentNode);var c=de("li",{styles:"list-style-type: none;"});me([c],d),me([l],c)}}if(o.parentNode.insertBefore(this.closeTag(a.tagName),o),"LI"===a.parentNode.tagName)o.parentNode.insertBefore(this.closeTag("LI"),o);else{if(s&&' class="'+s+'"',0===o.querySelectorAll(wn.join(", ")).length){var p="<p"+(h(s)?' class="e-rte-wrap-inner"':' class="'+s+' e-rte-wrap-inner"')+this.domNode.attributes(a)+"></p>";this.domNode.wrapInner(o,this.domNode.parseHTMLFragment(p))}else if(3===this.domNode.contents(o)[0].nodeType){var u=this.domNode.createTagString("p",a,this.parent.domNode.encode(this.domNode.contents(o)[0].textContent));this.domNode.replaceWith(this.domNode.contents(o)[0],u)}else if(this.domNode.contents(o)[0].classList.contains(On)||this.domNode.contents(o)[0].classList.contains(Pn)){u=this.domNode.createTagString("p",a,this.domNode.contents(o)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(o)[0],u)}else{var m=o.firstChild;s=m.getAttribute("class"),ye(m,this.domNode.rawAttributes(a)),s&&m.getAttribute("class")&&ye(m,{class:s+" "+m.getAttribute("class")})}me([this.openTag("LI")],o),ue([this.closeTag("LI")],o)}this.domNode.insertAfter(this.openTag(a.tagName),o),"LI"===a.parentNode.tagName&&(a=a.parentNode.parentNode),i.indexOf(a)<0&&i.push(a)}for(n=0;n<i.length;n++){var f=i[n],g=f.innerHTML;g=(g=g.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(f)+">"),this.domNode.replaceWith(f,this.domNode.openTagString(f)+g.trim()+this.domNode.closeTagString(f))}var y=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(n=0;n<y.length;n++)ge(y[n]);var v=this.parent.editableElement.querySelectorAll("li:empty");for(n=0;n<v.length;n++)ge(v[n])},e.prototype.openTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+e.toLowerCase()+'"></span>')},e.prototype.closeTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+e.toLowerCase()+'"></span>')},e}(),jn=function(){function e(){}return e.WrapBefore=function(e,t,n){return t.innerText=e.textContent,n?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]},e.Wrap=function(e,t){return this.AppendBefore(t,e),t.appendChild(e),e},e.unwrap=function(e){for(var t=e.parentNode,n=[];e.firstChild;null)n.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),n},e.AppendBefore=function(e,t,n){return t.parentNode?n?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.insertBefore(e,t):t},e}(),Fn=function(){function e(){this.position=-1,this.nodeSelection=new Ln}return e.prototype.GetSpliceNode=function(e,t){return t=this.SplitNode(e,t,!0),t=this.SplitNode(e,t,!1)},e.prototype.SplitNode=function(e,t,n){if(t){var r=e.cloneRange(),i=t.parentNode,o=this.nodeSelection.getIndex(t);r.collapse(n),n?r.setStartBefore(t):r.setEndAfter(t);var a,s=r.extractContents();if(n){if(t=i.childNodes[o],(s=this.spliceEmptyNode(s,!1))&&s.childNodes.length>0)if(!!(1!==s.childNodes.length||"IMG"===s.childNodes[0].nodeName||!this.isImgElm(s)||""!==s.textContent))if(t)jn.AppendBefore(s,t);else i.appendChild(s),(a=document.createElement("div")).innerHTML="&#65279;&#65279;",t=a.firstChild,i.appendChild(t)}else if(t=i.childNodes.length>1?i.childNodes[o]:i.childNodes[0],(s=this.spliceEmptyNode(s,!0))&&s.childNodes.length>0)if(!!(1!==s.childNodes.length||"IMG"===s.childNodes[0].nodeName||!this.isImgElm(s)||""!==s.textContent))if(t)jn.AppendBefore(s,t,!0);else i.appendChild(s),(a=document.createElement("div")).innerHTML="&#65279;&#65279;",i.insertBefore(a.firstChild,i.firstChild),t=i.firstChild;return t}return null},e.prototype.isImgElm=function(e){var t=!0;if(1===e.childNodes.length&&"IMG"!==e.childNodes[0].nodeName)for(var n=e.childNodes[0],r=0;!h(n.childNodes)&&r<n.childNodes.length;r++)"IMG"===n.childNodes[r].nodeName&&(t=!1);else t=!0;return t},e.prototype.spliceEmptyNode=function(e,t){var n;return(n=1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName&&""===e.childNodes[0].textContent||""===e.textContent?-1:e.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(e.childNodes[n],t):n>-1?this.spliceEmptyNode(e.childNodes[0],t):3!==e.nodeType&&11!==e.nodeType&&e.parentNode.removeChild(e),e},e.prototype.GetCursorStart=function(e,t,n){for(var r=(e=n?e:e.reverse())[0],i=0;i<e.length&&(n?e[i]<t:e[i]>=t);i++)r=e[i];return r},e.prototype.GetCursorRange=function(e,t,n){var r=e.createRange(),i=[];i.push(0);for(var o=this.TrimLineBreak(n.data),a=o.indexOf(" ",0);-1!==a;)i.indexOf(a)<0&&i.push(a),new RegExp("\\s").test(o[a-1])&&i.indexOf(a-1)<0&&i.push(a-1),new RegExp("\\s").test(o[a+1])&&i.push(a+1),a=o.indexOf(" ",a+1);if(i.push(o.length),i.indexOf(t.startOffset)>=0||i.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(o[0]))||i[i.length-1]-1===t.startOffset)r=t,this.position=1;else{var s=this.GetCursorStart(i,t.startOffset,!0);this.position=t.startOffset-s,r.setStart(t.startContainer,s),r.setEnd(t.startContainer,this.GetCursorStart(i,t.startOffset,!1))}return r},e.prototype.GetCursorNode=function(e,t,n){return this.GetSpliceNode(this.GetCursorRange(e,t,n),n)},e.prototype.TrimLineBreak=function(e){return e.replace(/(\r\n\t|\n|\r\t)/gm," ")},e}(),zn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.getParentNode=function(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e},e.prototype.onKeyDown=function(e){if(13===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,r=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,i=Ce(n,"pre"),o=Ce(r,"pre");if(!h(i)&&!h(i.parentElement)&&"LI"===i.parentElement.tagName)return;if((h(i)&&!h(o)||!h(i)&&h(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0)),13===e.event.which&&!h(i)&&!h(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t);var a=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],s=t.startContainer.childNodes[t.endOffset-1],l=t.startContainer;if(h(a)||h(s)||!h(a.nextSibling)||"BR"!==a.nodeName||"BR"!==s.nodeName)if(8203===l.textContent.charCodeAt(0)&&1===l.textContent.length||0===l.textContent.length){for(;"PRE"!==l.parentElement.nodeName&&(1===l.textContent.length||0===l.textContent.length);)l=l.parentElement;!h(l.previousSibling)&&"BR"===l.previousSibling.nodeName&&h(l.nextSibling)?this.paraFocus(l.parentElement):this.isNotEndCursor(i,t)}else this.isNotEndCursor(i,t);else this.paraFocus(t.startContainer)}}},e.prototype.removeCodeContent=function(e){var t=new RegExp(String.fromCharCode(65279),"g");if(!h(e.endContainer.textContent.match(t))){var n=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,""),""===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,n)}},e.prototype.deleteContent=function(e){e.startContainer===e.endContainer&&e.startOffset===e.endOffset||e.deleteContents()},e.prototype.paraFocus=function(e){var t=de("p");t.innerHTML="<br>",this.parent.domNode.insertAfter(t,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0),ge(e.lastChild)},e.prototype.isNotEndCursor=function(e,t){var n=new Fn,r=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)){this.insertMarker(e,t);var i=de("br");e.childNodes[t.endOffset].parentElement.insertBefore(i,e.childNodes[t.endOffset])}else{var o=n.SplitNode(t,e,!0);this.insertMarker(e,t);var a=e.previousElementSibling;"PRE"===a.tagName&&(a.insertAdjacentHTML("beforeend","<br>"+o.innerHTML),ge(e))}this.setCursorPosition(r,e)},e.prototype.setCursorPosition=function(e,t){var n=!1,r=this.parent.editableElement.querySelector(".tempSpan"),i=r.parentElement;if(""===r.parentNode.textContent?n=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0),e)if(n)i===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0),ge(r)):this.focusSelectionParent(r,i);else{var o=de("br");this.parent.domNode.insertAfter(o,r),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0),ge(r)}else n?this.focusSelectionParent(r,i):ge(r)},e.prototype.focusSelectionParent=function(e,t){ge(e),t.innerHTML="​",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},e.prototype.insertMarker=function(e,t){var n=de("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(n,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(n,t.startContainer)},e.prototype.applyFormats=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=!1;this.parent.editableElement!==t.endContainer||h(this.parent.editableElement.children[t.endOffset-1])||"TABLE"!==this.parent.editableElement.children[t.endOffset-1].tagName||(n=!0);var r=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(r);for(var i=this.parent.domNode.blockNodes(),o=0;o<i.length;o++){var a=void 0,s=void 0;if("blockquote"===e.subCommand.toLowerCase()?(a=this.getParentNode(i[o]),s=this.parent.domNode.isList(a)||"TABLE"===a.tagName?a.outerHTML:a.innerHTML):s=(a=i[o]).innerHTML,!(e.subCommand.toLowerCase()===a.tagName.toLowerCase()&&("pre"!==e.subCommand.toLowerCase()||!h(e.exeValue)&&"dropDownSelect"===e.exeValue.name)||h(a.parentNode)||"LI"===a.tagName&&"pre"!==e.subCommand.toLowerCase()||"TABLE"===a.tagName&&"pre"===e.subCommand.toLowerCase())){this.cleanFormats(a,e.subCommand);var l="pre"===e.subCommand.toLowerCase()&&"pre"===a.tagName.toLowerCase()?"p":e.subCommand,d=this.parent.domNode.createTagString(l,a,s.replace(/>\s+</g,"><"));"LI"===a.tagName?(a.innerHTML="",a.insertAdjacentHTML("beforeend",d)):this.parent.domNode.replaceWith(a,d)}}this.preFormatMerge();var c=this.parent.editableElement.querySelector("."+On),p=this.parent.editableElement.querySelector("."+Pn);h(c)||h(p)||(c=c.lastChild,p=p.lastChild),r=this.parent.domNode.saveMarker(r,null),Hn()&&In(this.parent.editableElement,e.selector),n?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,c,p,0,p.textContent.length):r.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.preFormatMerge=function(){var e=this.parent.editableElement.querySelectorAll("PRE");if(!h(e))for(var t=0;t<e.length;t++){var n=e[t].previousElementSibling;h(n)||"PRE"!==n.tagName||(n.insertAdjacentHTML("beforeend","<br>"+e[t].innerHTML),ge(e[t]))}},e.prototype.cleanFormats=function(e,t){var n=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];t=t.toLowerCase();for(var r=0;r<n.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;r++)e.style.removeProperty(n[r])},e}(),_n=function(){function e(){}return e.Insert=function(e,t,n,r){var i,o;"string"==typeof t?((o=document.createElement("div")).innerHTML=t,i=r?o:o.firstChild):r&&(h(t)||h(t.classList)||!t.classList.contains("pasteContent"))?((o=document.createElement("div")).appendChild(t),i=o):i=t;var a=new Ln,s=new Fn,l=a.getRange(e),d=l.startOffset===l.endOffset&&0===l.startOffset&&l.startContainer===l.endContainer,c=l.collapsed,p=a.getInsertNodeCollection(l),u="table"===i.nodeName.toLowerCase()?this.closestEle(p[0].parentNode,n):p[0];if(r||!h(i)&&!h(i.classList)&&i.classList.contains("pasteContent"))this.pasteInsertHTML(p,i,l,a,s,e,c,u,n);else if(n!==l.startContainer&&(!c&&(u.nodeType!==Node.ELEMENT_NODE||-1===Tn.indexOf(u.tagName.toLocaleLowerCase()))||"table"===i.nodeName.toLowerCase()&&u&&-1===Tn.indexOf(u.tagName.toLocaleLowerCase()))){var m=s.GetSpliceNode(l,u),f=m.previousSibling,g=m.parentNode;if(1===p.length)a.setSelectionContents(e,m),l=a.getRange(e);else{var y=s.GetSpliceNode(l,p[p.length-1].parentElement);y=h(y)?m:y,a.setSelectionText(e,m,y,0,3===y.nodeType?y.textContent.length:y.childNodes.length),l=a.getRange(e)}l.extractContents(),"TABLE"===t.tagName&&this.removeEmptyElements(n);for(var v=0;v<p.length;v++)if(3!==p[v].nodeType&&null!=p[v].parentNode){if("IMG"===p[v].nodeName)continue;p[v].parentNode.removeChild(p[v])}if(f)jn.AppendBefore(i,f,!0);else{for(var b=null;g!==n&&g.firstChild&&""===g.textContent.trim();){b=g,g=g.parentNode}null!==b&&(g=b),g.firstChild&&(g!==n||"TABLE"===i.nodeName&&d&&g===l.startContainer&&g===l.endContainer)?""===g.textContent.trim()&&g!==n?(jn.AppendBefore(i,g,!1),ge(g)):jn.AppendBefore(i,g.firstChild,!1):g.appendChild(i)}"IMG"===i.nodeName?this.imageFocus(i,a,e):3!==i.nodeType?a.setSelectionText(e,i,i,0,i.childNodes.length):a.setSelectionText(e,i,i,0,i.textContent.length)}else{if(l.deleteContents(),d&&""===l.startContainer.textContent&&(l.startContainer.innerHTML=""),Pe.isIE){var C=e.createDocumentFragment();C.appendChild(i),l.insertNode(C)}else l.insertNode(i);3!==i.nodeType&&i.childNodes.length>0?a.setSelectionText(e,i,i,1,1):"IMG"===i.nodeName?this.imageFocus(i,a,e):3!==i.nodeType?a.setSelectionContents(e,i):a.setSelectionText(e,i,i,i.textContent.length,i.textContent.length)}},e.pasteInsertHTML=function(e,t,n,r,i,o,a,s,l){var d,c,p,u,m=n.startOffset===n.endOffset&&n.startContainer===n.endContainer;if(m&&n.startContainer===l&&""===l.textContent){var f=this.getImmediateBlockNode(e[e.length-1],l);r.setSelectionText(o,f,f,0,0),n=r.getRange(o)}l!==n.startContainer&&(!a&&(s.nodeType!==Node.ELEMENT_NODE||-1===Tn.indexOf(s.tagName.toLocaleLowerCase()))||"table"===t.nodeName.toLowerCase()&&s&&-1===Tn.indexOf(s.tagName.toLocaleLowerCase()))&&(c=h((u=i.GetSpliceNode(n,s)).previousSibling)?u.parentNode.previousSibling:u.previousSibling,1===e.length?(r.setSelectionContents(o,u),n=r.getRange(o),p=!0):(d=h(d=i.GetSpliceNode(n,e[e.length-1].parentElement))?u:d,r.setSelectionText(o,u,d,0,3===d.nodeType?d.textContent.length:d.childNodes.length),n=r.getRange(o),p=!1));var g=!1;this.removingComments(t);for(var y,v=t.childNodes,b=0;b<v.length;b++)if(wn.indexOf(v[b].nodeName.toLocaleLowerCase())>=0){g=!0;break}var C=document.createDocumentFragment();if(g){var N=this.getImmediateBlockNode(e[e.length-1],l),E=i.GetSpliceNode(n,N);E.parentNode.replaceChild(t,E);var M=!0,S=void 0,w=void 0,x=void 0;for(n.deleteContents();t.firstChild;)if("#text"!==t.firstChild.nodeName||""!==t.firstChild.textContent.trim())if("#text"===t.firstChild.nodeName&&M||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&M){if(y=t.firstChild,h(t.previousElementSibling)){var T=de("p");t.parentElement.insertBefore(T,t)}t.previousElementSibling.appendChild(t.firstChild)}else y=t.firstChild,"#text"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(S?(x.appendChild(t.firstChild),C.appendChild(x)):((w=de("p")).appendChild(t.firstChild),C.appendChild(w)),x=w,S=!0):(C.appendChild(t.firstChild),S=!1),M=!1;else ge(t.firstChild);t.parentNode.replaceChild(C,t)}else if(m){var L=de("span",{className:"tempSpan"});for(n.insertNode(L);t.firstChild;)y=t.firstChild,C.appendChild(t.firstChild);L.parentNode.replaceChild(C,L)}else{for(;t.firstChild;)y=t.firstChild,C.appendChild(t.firstChild);p?u.parentNode.replaceChild(C,u):(n.deleteContents(),ge(d),h(c)?l.appendChild(C):c.parentNode.appendChild(C))}"#text"===y.nodeName?this.placeCursorEnd(y,t,r,o,l):this.cursorPos(y,t,r,o,l)},e.placeCursorEnd=function(e,t,n,r,i){for(e="BR"===e.nodeName?e.previousSibling:e;!h(e)&&"#text"!==e.nodeName&&"IMG"!==e.nodeName&&"BR"!==e.nodeName;)e=e.lastChild;"IMG"===(e=h(e)?t:e).nodeName?this.imageFocus(e,n,r):n.setSelectionText(r,e,e,e.textContent.length,e.textContent.length),this.removeEmptyElements(i)},e.cursorPos=function(e,t,n,r,i){e.classList.add("lastNode"),i.innerHTML=function(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var n=document.createElement("div");if(t.childNodes.length>0){for(var r=void 0,i=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||An.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(r?i.appendChild(t.firstChild):(o=de("p"),n.appendChild(o),o.appendChild(t.firstChild)),i=o,r=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?ge(t.firstChild):(n.appendChild(t.firstChild),r=!1);for(var a=n.querySelectorAll("table"),s=0;s<a.length;s++){"0"===a[s].getAttribute("border")&&a[s].removeAttribute("border");for(var l=a[s].querySelectorAll("td"),d=0;d<l.length;d++)l[d].style.removeProperty("border");a[s].classList.contains("e-rte-table")||a[s].classList.add("e-rte-table")}var c=n.querySelectorAll("img");for(s=0;s<c.length;s++)c[s].classList.contains("e-rte-image")||c[s].classList.add("e-rte-image"),c[s].classList.contains("e-imginline")||c[s].classList.contains("e-imgbreak")||c[s].classList.add("e-imginline")}return n.innerHTML}(i.innerHTML),e=i.querySelector(".lastNode"),this.placeCursorEnd(e,t,n,r,i),e.classList.remove("lastNode"),0===e.classList.length&&e.removeAttribute("class")},e.imageFocus=function(e,t,n){var r=document.createTextNode(" ");e.parentNode.insertBefore(r,e.nextSibling),t.setSelectionText(n,e.nextSibling,e.nextSibling,0,0)},e.getImmediateBlockNode=function(e,t){do{e=e.parentNode}while(wn.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.findDetachEmptyElem=function(e){return h(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"true"!==e.parentElement.contentEditable?this.findDetachEmptyElem(e.parentElement):e},e.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),n=0;n<t.length;n++)if("IMG"!==t[n].tagName&&"BR"!==t[n].tagName&&"IFRAME"!==t[n].tagName&&"TD"!==t[n].tagName){var r=this.findDetachEmptyElem(t[n]);h(r)||ge(r)}},e.closestEle=function(e,t){for(var n=e;n&&1===n.nodeType;){if(n.parentNode===t||!h(n.parentNode.tagName)&&-1!==xn.indexOf(n.parentNode.tagName.toLocaleLowerCase()))return n;n=n.parentNode}return null},e.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],e}(),qn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-LINK",this.linkCommand,this)},e.prototype.linkCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(e);break;case"openlink":this.openLink(e);break;case"removelink":this.removeLink(e)}},e.prototype.createLink=function(e){var t=!h(e.item.selectParent)&&e.item.selectParent.length>0&&Ce(e.item.selectParent[0],"a");if(t=h(t)?!h(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,h(t)||"A"!==t.tagName){var n=(new Ln).getRange(this.parent.currentDocument),r=!!h(e.item.text)||e.item.text.replace(/ /g,"").localeCompare(n.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(e.event&&"keydown"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||"Paste"===e.item.action||n.collapsed||r){var i=this.createAchorNode(e);if(i.innerText=""===e.item.text?e.item.url:e.item.text,e.item.selection.restore(),_n.Insert(this.parent.currentDocument,i,this.parent.editableElement),!e.event||"keydown"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode){l="Paste"===e.item.action?i.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,i.childNodes[0],i.childNodes[0],l,i.childNodes[0].textContent.length)}else{var o=e.item.selection.range.startContainer;o.textContent=this.removeText(o.textContent,e.item.text)}}else this.createLinkNode(e)}else{var a=t,s="";if(h(e.item.url)||a.setAttribute("href",e.item.url),h(e.item.title)||a.setAttribute("title",e.item.title),h(e.item.text)||(s=a.innerText,a.innerText=e.item.text),h(e.item.target)?a.removeAttribute("target"):a.setAttribute("target",e.item.target),s===e.item.text)e.item.selection.setSelectionText(this.parent.currentDocument,a,a,1,1),e.item.selection.restore();else{var l="Paste"===e.item.action?a.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,a.childNodes[0],a.childNodes[0],l,a.childNodes[0].textContent.length)}}e.callBack&&e.callBack({requestType:"Links",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.createLinkNode=function(e){for(var t,n,r=new Ln,i=new Fn,o=r.getRange(this.parent.currentDocument),a=this.getSelectionNodes(r.getNodeCollection(o)),s=r.save(o,this.parent.currentDocument),l=[],d=[],c=[],h=[],p=[],u=0;u<a.length;u++)a[u]=i.GetSpliceNode(o,a[u]),l[u]=a[u];for(var m=0;m<l.length;m++){var f=!0;for(t=l[m];!0===f;){if("A"===t.parentElement.nodeName){var g=t.parentElement;t.parentElement.parentElement.insertBefore(g.firstChild,g),t.parentElement.removeChild(g)}this.isBlockNode(t.parentElement)||0===l.length||0===m||m===l.length-1?(d[m]=t,f=!1):t=t.parentElement}}m=0;for(var y=0;m<d.length;m++)if(0===m&&(p[y]=d[m]),d.length>1&&m<d.length-1){if(d[m].parentElement===d[m+1].parentElement&&d[m]===d[m+1])continue;p[y+1]=d[m+1],y++}var v=0;h[v]=this.createAchorNode(e);for(m=0;m<p.length;m++)if(0===m&&(n=p[m].cloneNode(!0),h[m].appendChild(n)),m<p.length-1)if(p[m].parentNode===p[m+1].parentNode){var b=p[m+1].cloneNode(!0);h[v].appendChild(b)}else h[v+=1]=this.createAchorNode(e),n=p[m+1].cloneNode(!0),h[v].appendChild(n);this.parent.nodeSelection.setRange(document,s.range);m=0;for(var C=0,N=0;m<=p.length;m++)0===m&&(p[m].parentNode.insertBefore(h[C],p[m].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,h[C]),c[N]=p[m],N++),m<p.length-1&&(p[m].parentNode===p[m+1].parentNode?(c[N]=p[m+1],N++):(C+=1,p[m+1].parentNode.insertBefore(h[C],p[m+1]),c[N]=p[m+1],N++));for(m=0;m<c.length;m++)c[m].parentNode&&c[m].parentNode.removeChild(c[m])},e.prototype.createAchorNode=function(e){var t=de("a",{className:"e-rte-anchor",attrs:{href:e.item.url,title:h(e.item.title)||""===e.item.title?e.item.url:e.item.title}});return h(e.item.target)||t.setAttribute("target",e.item.target),t},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)3===e[t].nodeType&&""!==e[t].textContent.trim()||"IMG"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&wn.indexOf(e.tagName.toLowerCase())>=0},e.prototype.removeText=function(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]===t&&(n.splice(r,1),r--);return n.join(" ")+" "},e.prototype.openLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeLink=function(e){var t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);for(var n=Ce(e.item.selectParent[0],"a"),r=n||e.item.selectParent[0],i=r.parentNode,o=[];r.firstChild;null)o.push(i.insertBefore(r.firstChild,r));i.removeChild(r),o&&1===o.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(o[o.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(var a=0;a<t.length;a++)for(var s=t[a].querySelectorAll("a"),l=0;l<s.length;l++)document.getSelection().containsNode(s[l],!0)&&(s[l].outerHTML=s[l].innerHTML);e.item.selection.restore(),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Gn=function(){function e(e){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("alignment-type",this.applyAlignment,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:e.callBack}),e.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:e.callBack}),e.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:e.callBack}),e.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getTableNode=function(e){return[Ce(e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode,"td,th")]},e.prototype.applyAlignment=function(e){var t="Table"===e.value,n=this.parent.nodeSelection.getRange(this.parent.currentDocument),r=this.parent.nodeSelection.save(n,this.parent.currentDocument);if(t)Ne(this.getTableNode(n)[0],{"text-align":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(r);for(var i=this.parent.domNode.blockNodes(),o=0;o<i.length;o++){Ne(i[o],{"text-align":this.alignments[e.subCommand]})}var a=this.parent.domNode.getImageTagInSelection();for(o=0;o<a.length;o++){var s=[];s.push(a[o]),this.parent.imgObj.imageCommand({item:{selectNode:s},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),r=this.parent.domNode.saveMarker(r),Hn()&&In(this.parent.editableElement,e.selector),r.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(n):this.parent.domNode.blockNodes()})},e}(),Un=function(){function e(e){this.indentValue=20,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("indent-type",this.applyIndents,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:e.callBack}),e.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyIndents=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(n);for(var r=this.parent.domNode.blockNodes(),i=r.slice(),o=[],a=0;a<i.length;a++)"LI"!==i[a].tagName&&"LI"===i[a].parentNode.tagName?(r.splice(r.indexOf(i[a]),1),o.push(i[a].parentNode)):"LI"===i[a].tagName&&(r.splice(r.indexOf(i[a]),1),o.push(i[a]));o.length>0&&this.parent.observer.notify("keydown-handler",{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==e.subCommand,which:9,action:"indent"},ignoreDefault:!0});for(a=0;a<r.length;a++){var s=r[a],l=s.style.marginLeft,d=void 0;"Indent"===e.subCommand?(d=""===l?this.indentValue+"px":parseInt(l,null)+this.indentValue+"px",s.style.marginLeft=d):(d=""===l||"0px"===l?"":parseInt(l,null)-this.indentValue+"px",s.style.marginLeft=d)}this.parent.editableElement.focus(),Hn()&&In(this.parent.editableElement,e.selector),(n=this.parent.domNode.saveMarker(n)).restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e}(),Vn="e-img-caption",Wn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-IMAGE",this.imageCommand,this)},e.prototype.imageCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"image":case"replace":this.createImage(e);break;case"insertlink":this.insertImageLink(e);break;case"openimagelink":this.openImageLink(e);break;case"editimagelink":this.editImageLink(e);break;case"removeimagelink":this.removeImageLink(e);break;case"remove":this.removeImage(e);break;case"alttext":this.insertAltTextImage(e);break;case"dimension":this.imageDimension(e);break;case"caption":this.imageCaption(e);break;case"justifyleft":this.imageJustifyLeft(e);break;case"justifycenter":this.imageJustifyCenter(e);break;case"justifyright":this.imageJustifyRight(e);break;case"inline":this.imageInline(e);break;case"break":this.imageBreak(e)}},e.prototype.createImage=function(e){if(e.item.url=h(e.item.url)||"undefined"===e.item.url?e.item.src:e.item.url,h(e.item.selectParent)||"IMG"!==e.item.selectParent[0].tagName){var t=de("img");this.setStyle(t,e),h(e.item.selection)||e.item.selection.restore(),h(e.selector)||"pasteCleanupModule"!==e.selector?_n.Insert(this.parent.currentDocument,t,this.parent.editableElement):e.callBack({requestType:"Image",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]})}else{var n=e.item.selectParent[0];this.setStyle(n,e)}e.callBack&&(h(e.selector)||!h(e.selector)&&"pasteCleanupModule"!==e.selector)&&e.callBack({requestType:"Image",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.setStyle=function(e,t){h(t.item.url)||e.setAttribute("src",t.item.url),e.setAttribute("class","e-rte-image"+(h(t.item.cssClass)?"":" "+t.item.cssClass)),h(t.item.altText)||e.setAttribute("alt",t.item.altText),h(t.item.width)||h(t.item.width.width)||e.setAttribute("width",this.calculateStyleValue(t.item.width.width)),h(t.item.height)||h(t.item.height.height)||e.setAttribute("height",this.calculateStyleValue(t.item.height.height)),h(t.item.width)||h(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),h(t.item.width)||h(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),h(t.item.height)||h(t.item.height.minHeight)||(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),h(t.item.height)||h(t.item.height.maxHeight)||(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.insertImageLink=function(e){var t=de("a",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(e.item.selection.restore(),t.setAttribute("contenteditable","true")),t.appendChild(e.item.selectNode[0]),h(e.item.target)||t.setAttribute("target",e.item.target),_n.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)},e.prototype.openImageLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeImageLink=function(e){var t=e.item.selectParent[0];if(t.classList.contains("e-img-caption")){var n=ve(".e-img-wrap",t),r=ve(".e-img-inner",t),i=r.cloneNode(!0);ge(ve("a",t)),ge(r),n.appendChild(e.item.insertElement),n.appendChild(i)}else ge(t),Pe.isIE&&e.item.selection.restore(),_n.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)},e.prototype.editImageLink=function(e){e.item.selectNode[0].parentElement.href=e.item.url,h(e.item.target)?e.item.selectNode[0].parentElement.removeAttribute("target"):e.item.selectNode[0].parentElement.target=e.item.target,this.callBack(e)},e.prototype.removeImage=function(e){Ce(e.item.selectNode[0],"a")?"A"!==e.item.selectNode[0].parentElement.nodeName||h(e.item.selectNode[0].parentElement.innerText)?ge(Ce(e.item.selectNode[0],"a")):ge(e.item.selectNode[0]):h(Ce(e.item.selectNode[0],"."+Vn))?ge(e.item.selectNode[0]):ge(Ce(e.item.selectNode[0],"."+Vn)),this.callBack(e)},e.prototype.insertAltTextImage=function(e){e.item.selectNode[0].setAttribute("alt",e.item.altText),this.callBack(e)},e.prototype.imageDimension=function(e){var t=e.item.selectNode[0];t.style.height="",t.style.width="",t.width=e.item.width,t.height=e.item.height,this.callBack(e)},e.prototype.imageCaption=function(e){_n.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)},e.prototype.imageJustifyLeft=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ce([t],"e-rte-image"),h(Ce(t,"."+Vn))||(he([Ce(t,"."+Vn)],"e-imgright"),ce([Ce(t,"."+Vn)],"e-imgleft")),"A"===t.parentElement.nodeName?(he([t.parentElement],"e-imgright"),ce([t.parentElement],"e-imgleft")):ce([t],"e-imgleft"),this.callBack(e)},e.prototype.imageJustifyCenter=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ce([t],"e-rte-image"),h(Ce(t,"."+Vn))||(he([Ce(t,"."+Vn)],"e-imgleft"),he([Ce(t,"."+Vn)],"e-imgright"),ce([Ce(t,"."+Vn)],"e-imgcenter")),"A"===t.parentElement.nodeName?(he([t.parentElement],"e-imgleft"),he([t.parentElement],"e-imgright"),ce([t.parentElement],"e-imgcenter"),ce([t],"e-imgcenter")):ce([t],"e-imgcenter"),this.callBack(e)},e.prototype.imageJustifyRight=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ce([t],"e-rte-image"),h(Ce(t,"."+Vn))||(he([Ce(t,"."+Vn)],"e-imgleft"),ce([Ce(t,"."+Vn)],"e-imgright")),"A"===t.parentElement.nodeName?(he([t.parentElement],"e-imgleft"),ce([t.parentElement],"e-imgright")):ce([t],"e-imgright"),this.callBack(e)},e.prototype.imageInline=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ce([t],"e-rte-image"),ce([t],"e-imginline"),h(Ce(t,"."+Vn))||(he([Ce(t,"."+Vn)],"e-imgbreak"),he([Ce(t,"."+Vn)],"e-imgcenter"),he([Ce(t,"."+Vn)],"e-imgleft"),he([Ce(t,"."+Vn)],"e-imgright"),ce([Ce(t,"."+Vn)],"e-caption-inline")),this.callBack(e)},e.prototype.imageBreak=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ce([t],"e-imgbreak"),ce([t],"e-rte-image"),h(Ce(t,"."+Vn))||(he([Ce(t,"."+Vn)],"e-caption-inline"),he([Ce(t,"."+Vn)],"e-imgcenter"),he([Ce(t,"."+Vn)],"e-imgleft"),he([Ce(t,"."+Vn)],"e-imgright"),ce([Ce(t,"."+Vn)],"e-imgbreak")),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Kn=function(){function e(){}return e.prototype.getFormattedNode=function(e,t,n){var r=this.getFormatParent(e,t,n);return null!==r&&r!==n?r:null},e.prototype.getFormatParent=function(e,t,n){do{e=e.parentNode}while(e&&e!==n&&!this.isFormattedNode(e,t));return e},e.prototype.isFormattedNode=function(t,n){switch(n){case"bold":return e.isBold(t);case"italic":return e.isItalic(t);case"underline":return e.isUnderline(t);case"strikethrough":return e.isStrikethrough(t);case"superscript":return e.isSuperscript(t);case"subscript":return e.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},e.isBold=function(e){return-1!==["strong","b"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"bold"!==e.style.fontWeight)},e.isItalic=function(e){return-1!==["em","i"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"italic"!==e.style.fontStyle)},e.isUnderline=function(e){return-1!==["u"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"underline"!==e.style.textDecoration)},e.isStrikethrough=function(e){return-1!==["del","strike"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"line-through"!==e.style.textDecoration)},e.isSuperscript=function(e){return-1!==["sup"].indexOf(e.nodeName.toLowerCase())},e.isSubscript=function(e){return-1!==["sub"].indexOf(e.nodeName.toLowerCase())},e.prototype.isFontColor=function(t){var n=t.style&&t.style.color;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&""!==n&&void 0!==n},e.prototype.isBackgroundColor=function(t){var n=t.style&&t.style.backgroundColor;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&""!==n&&void 0!==n},e.prototype.isFontSize=function(t){var n=t.style&&t.style.fontSize;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&""!==n&&void 0!==n},e.prototype.isFontName=function(t){var n=t.style&&t.style.fontFamily;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&""!==n&&void 0!==n},e.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var"],e}(),Jn=function(){function e(){}return e.applyFormat=function(e,t,n,r,i){if(["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1){var o,a=new Ln,s=new Fn,l=new Kn,d=a.getRange(e),c=a.save(d,e),h=d.collapsed?a.getSelectionNodeCollection(d):a.getSelectionNodeCollectionBr(d),p=!1,u=!1,m=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1;if(d.collapsed)if(h.length>0)p=!0,d=s.GetCursorRange(e,d,h[0]);else if("td"!==d.startContainer.nodeName.toLowerCase()){var f=this.insertCursorNode(e,a,d,l,s,t,r,n);a.endContainer=a.startContainer=a.getNodeArray(f,!0),a.endOffset=a.startOffset=1}o=d.collapsed;for(var g=0;g<h.length;g++){var y=l.getFormattedNode(h[g],t,n);0===g&&null===y&&(u=!0),h[g]=null===y||u&&!m?this.insertFormat(e,h,g,y,o,u,m,d,s,t,r):this.removeFormat(h,g,y,o,u,m,d,s,t,r,a),a=this.applySelection(h,a,s,g,p)}Hn()&&In(n,i),c.restore()}},e.insertCursorNode=function(e,t,n,r,i,o,a,s){var l=t.getNodeCollection(n),d=l.length>0?r.getFormattedNode(l[0],o,s):null,c=null;return d?(c=l[0],jn.unwrap(d),l[0]=jn.Wrap(l[0],this.GetFormatNode(o,a))):c=this.getInsertNode(e,n,o,a).firstChild,c},e.removeFormat=function(e,t,n,r,i,o,a,s,l,d,c){var p=null;if(a.startContainer!==a.endContainer||0!==a.startOffset||a.endOffset!==a.startContainer.length){var u=[],m=e[t];do{u.push(c.getIndex(m)),m=m.parentNode}while(m&&m!==n);if("BR"!==e[t].nodeName&&(m=p=r&&n.textContent.length-1===a.startOffset?s.SplitNode(a,n,!0):s.GetSpliceNode(a,n)),r){for(var f=p;null!==f.firstChild&&3!==f.firstChild.nodeType;null)f=f.firstChild;f.innerHTML="&#8203;",e[t]=f.firstChild}else{for(;m&&m.childNodes.length>0&&u.length-1>=0&&m.childNodes.length>u[u.length-1];)m=m.childNodes[u[u.length-1]],u.pop();if("BR"!==e[t].nodeName)if(3!==m.nodeType||r&&""===m.nodeValue){var g=document.createElement("div");g.innerHTML="&#8203;",3!==m.nodeType?(m.insertBefore(g.firstChild,m.firstChild),e[t]=m.firstChild):(m.parentNode.insertBefore(g.firstChild,m),e[t]=m.previousSibling,m.parentNode.removeChild(m))}else e[t]=m}}var y=jn.unwrap(n);if(y.length>0&&o){for(var v=0;v<y.length;v++)y[v]=jn.Wrap(y[v],this.GetFormatNode(l,d));if("fontsize"===l){for(var b=e[t].parentElement,C=e[t].parentElement;!h(C)&&"li"!==C.tagName.toLowerCase();)b=C=C.parentElement;h(b)||"li"!==b.tagName.toLowerCase()||b.textContent.trim()!==e[t].textContent.trim()||(b.style.fontSize=d)}}return e[t]},e.insertFormat=function(e,t,n,r,i,o,a,s,l,d,c){if(i)if("uppercase"!==d&&"lowercase"!==d){p=this.getInsertNode(e,s,d,c);t[n]=p.firstChild,l.position=1}else l.position=s.startOffset;else if(null===r&&o||a){if("BR"!==t[n].nodeName&&(t[n]=l.GetSpliceNode(s,t[n]),t[n].textContent=l.TrimLineBreak(t[n].textContent)),"uppercase"===d||"lowercase"===d)t[n].textContent="uppercase"===d?t[n].textContent.toLocaleUpperCase():t[n].textContent.toLocaleLowerCase();else if(!0!==a||""!==c){var p=this.GetFormatNode(d,c);if("fontsize"===d){for(var u=t[n].parentElement,m=t[n].parentElement;!h(m)&&"li"!==m.tagName.toLowerCase();)u=m=m.parentElement;h(u)||"li"!==u.tagName.toLowerCase()||u.textContent.trim()!==t[n].textContent.trim()||(u.style.fontSize=c),t[n]=this.applyStyles(t,n,p)}else t[n]=this.applyStyles(t,n,p)}}else t[n]=l.GetSpliceNode(s,t[n]);return t[n]},e.applyStyles=function(e,t,n){return e[t]=t===e.length-1||"BR"===e[t].nodeName?jn.Wrap(e[t],n):jn.WrapBefore(e[t],n,!0),e[t]=this.getChildNode(e[t],n),e[t]},e.getInsertNode=function(e,t,n,r){var i=this.GetFormatNode(n,r);if(i.innerHTML="&#8203;",Pe.isIE){var o=e.createDocumentFragment();o.appendChild(i),t.insertNode(o)}else t.insertNode(i);return i},e.getChildNode=function(e,t){return null==e&&(t.innerHTML="&#8203;",e=t.firstChild),e},e.applySelection=function(e,t,n,r,i){return 1!==e.length||i?1===e.length&&i?(t.startContainer=t.getNodeArray(e[r],!0),t.endContainer=t.startContainer,t.startOffset=n.position,t.endOffset=n.position):0===r?(t.startContainer=t.getNodeArray(e[r],!0),t.startOffset=0):r===e.length-1&&(t.endContainer=t.getNodeArray(e[r],!1),t.endOffset=e[r].textContent.length):(t.startContainer=t.getNodeArray(e[r],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=e[r].textContent.length),t},e.GetFormatNode=function(e,t){var n;switch(e){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return(n=document.createElement("span")).style.textDecoration="underline",n;case"strikethrough":return(n=document.createElement("span")).style.textDecoration="line-through",n;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return(n=document.createElement("span")).style.color=t,n.style.textDecoration="inherit",n;case"fontname":return(n=document.createElement("span")).style.fontFamily=t,n;case"fontsize":return(n=document.createElement("span")).style.fontSize=t,n;default:return(n=document.createElement("span")).style.backgroundColor=t,n}},e}(),Xn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("selection-type",this.applySelection,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){e.event.ctrlKey&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),Jn.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement),this.callBack(e,e.event.action))},e.prototype.applySelection=function(e){Jn.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.value,e.selector),this.callBack(e,e.subCommand)},e.prototype.callBack=function(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),$n=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("inserthtml-type",this.applyHtml,this)},e.prototype.applyHtml=function(e){_n.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0),"pasteCleanup"===e.subCommand?e.callBack({requestType:e.subCommand,editorMode:"HTML",elements:e.value}):e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Yn=function(){function e(){}return e.clear=function(e,t,n){var r=new Ln,i=new Fn,o=r.getRange(e),a=o.collapsed,s=r.getInsertNodeCollection(o),l=r.save(o,e);if(!a){var d=i.GetSpliceNode(o,s[0]);if(1===s.length)r.setSelectionContents(e,d),o=r.getRange(e);else{for(var c=1,h=s[s.length-c];"BR"===s[s.length-c].nodeName;)c++,h=s[s.length-c];var p=i.GetSpliceNode(o,h);r.setSelectionText(e,d,p,0,3===p.nodeType?p.textContent.length:p.childNodes.length),o=r.getRange(e)}var u=r.getNodeCollection(o),m=u.slice();this.clearInlines(r.getSelectionNodes(m),m,r.getRange(e),i,t),this.reSelection(e,l,u),o=r.getRange(e);var f=(u=r.getNodeCollection(o)).slice();this.clearBlocks(e,f,t,i,r),Hn()&&In(t,n),this.reSelection(e,l,u)}},e.reSelection=function(e,t,n){var r=t.getInsertNodes(n);t.startContainer=t.getNodeArray(r[0],!0,e),t.startOffset=0,t.endContainer=t.getNodeArray(r[r.length-1],!1,e);var i=r[r.length-1];t.endOffset=3===i.nodeType?i.textContent.length:i.childNodes.length,t.restore()},e.clearBlocks=function(e,t,n,r,i){for(var o=[],a=0;a<t.length;a++)this.BLOCK_TAGS.indexOf(t[a].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[a])?o.push(t[a]):this.BLOCK_TAGS.indexOf(t[a].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[a].parentNode)&&n!==t[a].parentNode&&o.push(t[a].parentNode);o=this.spliceParent(o,t)[0],o=this.removeParent(o),this.unWrap(e,o,r,i)},e.spliceParent=function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].childNodes.length,i=0;i<r;i++)if(t.indexOf(e[n].childNodes[i])>0&&e[n].childNodes[i].childNodes.length>0&&(t=this.spliceParent([e[n].childNodes[i]],t)[1]),t.indexOf(e[n].childNodes[i])<=-1&&""!==e[n].childNodes[i].textContent.trim()){for(var o=0;o<r;o++)t.indexOf(e[n].childNodes[o])>-1&&t.splice(t.indexOf(e[n].childNodes[o]),1);i=e[n].childNodes.length;var a=e.indexOf(e[n].parentNode),s=t.indexOf(e[n].parentNode);a>-1&&e.splice(a,1),s>-1&&t.splice(s,1);var l=t.indexOf(e[n]);l>-1&&t.splice(l,1),e.splice(n,1),n--}return[e,t]},e.removeChild=function(e,t){var n=t.childNodes.length;if(n>0)for(var r=0;r<n;r++)e.indexOf(t.childNodes[r])>-1&&(e=this.removeChild(e,t.childNodes[r])).splice(e.indexOf(t.childNodes[r]),1);return e},e.removeParent=function(e){for(var t=0;t<e.length;t++)e.indexOf(e[t].parentNode)>-1&&((e=this.removeChild(e,e[t])).splice(t,1),t--);return e},e.unWrap=function(e,t,n,r){for(var i=0;i<t.length;i++)if(this.NONVALID_TAGS.indexOf(t[i].nodeName.toLowerCase())>-1&&t[i].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[i].parentNode.nodeName.toLowerCase())>-1&&(r.setSelectionText(e,t[i],t[i],0,t[i].childNodes.length),jn.unwrap(n.GetSpliceNode(r.getRange(e),t[i].parentNode))),"p"!==t[i].nodeName.toLocaleLowerCase()){!(this.NONVALID_PARENT_TAGS.indexOf(t[i].nodeName.toLowerCase())<0&&"p"!==t[i].parentNode.nodeName.toLocaleLowerCase())||("blockquote"===t[i].nodeName.toLocaleLowerCase()||"li"===t[i].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[i].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[i].childNodes.length&&"p"===t[i].childNodes[0].nodeName.toLocaleLowerCase()||jn.Wrap(t[i],e.createElement("p"));var o=jn.unwrap(t[i]);1===o.length&&"p"===o[0].parentNode.nodeName.toLocaleLowerCase()&&(jn.Wrap(t[i],e.createElement("p")),jn.unwrap(t[i]));for(var a=0;a<o.length;a++)if(this.NONVALID_TAGS.indexOf(o[a].nodeName.toLowerCase())>-1)this.unWrap(e,[o[a]],n,r);else if(this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&"p"!==o[a].nodeName.toLocaleLowerCase()){var s=this.removeParent([o[a]]);this.unWrap(e,s,n,r)}else this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&o[a].parentNode.nodeName.toLocaleLowerCase()===o[a].nodeName.toLocaleLowerCase()?jn.unwrap(o[a]):this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&"p"===o[a].nodeName.toLocaleLowerCase()&&(jn.Wrap(o[a],e.createElement("p")),jn.unwrap(o[a]))}else jn.Wrap(t[i],e.createElement("p")),jn.unwrap(t[i])},e.clearInlines=function(e,t,n,r,i){for(var o=0;o<e.length;o++)e[o].parentNode&&Kn.inlineTags.indexOf(e[o].parentNode.nodeName.toLocaleLowerCase())>-1&&(r.GetSpliceNode(n,e[o].parentNode),this.removeInlineParent(e[o].parentNode))},e.removeInlineParent=function(e){for(var t=jn.unwrap(e),n=0;n<t.length;n++)1===t[n].parentNode.childNodes.length&&Kn.inlineTags.indexOf(t[n].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(t[n].parentNode):Kn.inlineTags.indexOf(t[n].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(t[n])},e.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"],e.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],e.IGNORE_PARENT_TAGS=["ul","ol","table"],e.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],e}(),Zn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-type",this.applyClear,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyClear=function(e){"ClearFormat"===e.subCommand&&(Yn.clear(this.parent.currentDocument,this.parent.editableElement,e.selector),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},e}(),Qn=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=h(t)?30:t.undoRedoSteps,this.undoRedoTimer=h(t)?300:t.undoRedoTimer,this.addEventListener()}return e.prototype.addEventListener=function(){var e=u(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,n=Object.keys(e.newProp);t<n.length;t++){switch(n[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){this.parent.observer.off("keyup-handler",this.keyUp),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction)},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=(new Ln).getRange(this.parent.currentDocument),n=(new Ln).save(t,this.parent.currentDocument),r={text:this.parent.editableElement.innerHTML,range:n};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===n.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===n.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===n.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===r.text.trim()||(this.undoRedoStack.push(r),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,n=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML=n,this.parent.editableElement.focus(),Hn()&&In(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text,this.parent.editableElement.focus(),Hn()&&In(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),er=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text-type",this.insertText,this)},e.prototype.insertText=function(e){var t=document.createTextNode(e.value);_n.Insert(this.parent.currentDocument,t),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),tr=function(){function e(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new Ln,this.domNode=new Rn(this.editableElement,this.currentDocument),this.observer=new Ue(this),this.listObj=new Bn(this),this.formatObj=new zn(this),this.alignmentObj=new Gn(this),this.indentsObj=new Un(this),this.linkObj=new qn(this),this.imgObj=new Wn(this),this.selectionObj=new Xn(this),this.inserthtmlObj=new $n(this),this.insertTextObj=new er(this),this.clearObj=new Zn(this),this.undoRedoManager=new Qn(this,e.options),this.wireEvents()}return e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this)},e.prototype.onWordPaste=function(e){this.observer.notify("ms_word_cleanup_plugin",e)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.execCommand=function(e,t,n,r,i,o,a){switch(e.toLocaleLowerCase()){case"lists":this.observer.notify("list-type",{subCommand:t,event:n,callBack:r,selector:a});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:n,callBack:r,selector:a,exeValue:o});break;case"alignments":this.observer.notify("alignment-type",{subCommand:t,event:n,callBack:r,selector:a,value:o});break;case"indents":this.observer.notify("indent-type",{subCommand:t,event:n,callBack:r,selector:a});break;case"links":this.observer.notify("INSERT-LINK",{command:e,value:t,item:o,event:n,callBack:r});break;case"images":this.observer.notify("INSERT-IMAGE",{command:e,value:t,item:o,event:n,callBack:r,selector:a});break;case"font":case"style":case"effects":case"casing":this.observer.notify("selection-type",{subCommand:t,event:n,callBack:r,value:i,selector:a});break;case"inserthtml":this.observer.notify("inserthtml-type",{subCommand:t,callBack:r,value:i});break;case"inserttext":this.observer.notify("insert-text-type",{subCommand:t,callBack:r,value:i});break;case"clear":this.observer.notify("clear-type",{subCommand:t,event:n,callBack:r,selector:a});break;case"actions":this.observer.notify("action",{subCommand:t,event:n,callBack:r,selector:a})}},e}(),nr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rr=function(e){function t(t){var n=e.call(this)||this;return n.initialize(),c(n,n,t,!0),n.currentDocument&&n.element&&n.updateFormatter(n.element,n.currentDocument,t.options),n}return nr(t,e),t.prototype.initialize=function(){this.keyConfig=kn},t.prototype.updateFormatter=function(e,t,n){e&&t&&(this.editorManager=new tr({document:t,editableElement:e,options:n}))},t}(Sn),ir=function(){function e(e,t){this.parent=e,this.serviceLocator=t}return e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.createElement("div",{className:"e-rte-content",id:this.parent.getID()+"rte-view"}),n=gn(e.value,e);this.editableElement=this.parent.createElement("div",{className:"e-content",id:this.parent.getID()+"_rte-edit-view",attrs:{contenteditable:"true"},innerHTML:n}),t.appendChild(this.editableElement),this.setPanel(t),e.element.appendChild(t)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getEditPanel=function(){return this.editableElement},e.prototype.getText=function(){return this.getEditPanel().textContent},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},e}(),or=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("xhtmlValidation",this.enableXhtmlValidation,this)},e.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(this.clean(this.parent.inputElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.parent.setProperties({value:this.parent.inputElement.innerHTML},!0))},e.prototype.AddRootElement=function(){if(1===this.parent.inputElement.childNodes.length&&"DIV"!==this.parent.inputElement.firstChild.nodeName||this.parent.inputElement.childNodes.length>1){for(var e=this.parent.createElement("div");this.parent.inputElement.childNodes.length>0;)e.appendChild(this.parent.inputElement.childNodes[0]);this.parent.inputElement.appendChild(e)}},e.prototype.clean=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];8===n.nodeType||"V:IMAGE"===n.nodeName?(e.removeChild(n),t--):1===n.nodeType&&this.clean(n)}return this.parent.inputElement.innerHTML},e.prototype.ImageTags=function(){for(var e=this.parent.inputElement.querySelectorAll("IMG"),t=e.length-1;t>=0;t--){if(!e[t].hasAttribute("alt"))e[t].setAttribute("alt","")}},e.prototype.removeTags=function(){for(var e=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])},e.prototype.RemoveElementNode=function(e,t){for(var n=this.parent.inputElement.querySelectorAll(t),r=0;r<n.length;r++)for(var i=n[r].querySelectorAll(e),o=i.length;o>0;o--)ge(i[o-1])},e.prototype.RemoveUnsupported=function(){for(var e=this.parent.inputElement.querySelectorAll("u"),t=e.length-1;t>=0;t--){var n=this.parent.createElement("span");n.style.textDecoration="underline",n.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(n,e[t]),ge(e[t])}var r=this.parent.inputElement.querySelectorAll("strong");for(t=r.length-1;t>=0;t--){var i=this.parent.createElement("b");i.innerHTML=r[t].innerHTML,r[t].parentNode.insertBefore(i,r[t]),ge(r[t])}var o=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(t=0;t<=o.length;t++)this.RemoveAttributeByName(o[t])},e.prototype.RemoveAttributeByName=function(e){if(null!==this.parent.inputElement.firstChild&&3!==this.parent.inputElement.firstChild.nodeType)for(var t=0;t<this.parent.inputElement.childNodes.length;t++){var n=this.parent.inputElement.childNodes[t];if(3!==n.nodeType&&"TABLE"!==n.nodeName&&"TBODY"!==n.nodeName&&"THEAD"!==n.nodeName&&"TH"!==n.nodeName&&"TR"!==n.nodeName&&"TD"!==n.nodeName&&(n.hasAttribute(e)&&n.removeAttribute(e),n.hasChildNodes()))for(var r=0;r<n.childNodes.length;r++){var i=n.childNodes[r];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&i.hasAttribute(e)&&i.removeAttribute(e),i.hasChildNodes())for(var o=0;o<i.childNodes.length;o++)3!==i.childNodes[o].nodeType&&"TABLE"!==i.childNodes[o].nodeName&&"TBODY"!==i.childNodes[o].nodeName&&"THEAD"!==i.childNodes[o].nodeName&&"TH"!==i.childNodes[o].nodeName&&"TR"!==i.childNodes[o].nodeName&&"TD"!==i.childNodes[o].nodeName&&i.childNodes[o].hasAttribute(e)&&i.childNodes[o].removeAttribute(e)}}},e}(),ar=function(){function e(e,t){this.rangeCollection=[],this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.xhtmlValidation=new or(e),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener()},e.prototype.sanitizeHelper=function(e){return e=function(e,t){if(t.enableHtmlSanitizer){var n=cn.beforeSanitize();c(n,n,{cancel:!1,helper:null}),t.trigger("beforeSanitizeHtml",n),n.cancel&&!h(n.helper)?e=n.helper(e):n.cancel||(e=cn.serializeValue(n,e))}return e}(e,this.parent)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.nodeSelectionObj=new Ln,this.parent.on("initial-load",this.instantiateRenderer,this),this.parent.on("keyDown",this.onKeyDown,this),this.parent.on("initial-end",this.render,this),this.parent.on("model-changed",this.onPropertyChanged,this),this.parent.on("destroy",this.destroy,this),this.parent.on("selectAll",this.selectAll,this),this.parent.on("selectRange",this.selectRange,this),this.parent.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.on("selection-save",this.onSelectionSave,this),this.parent.on("selection-restore",this.onSelectionRestore,this),this.parent.on("readOnlyMode",this.updateReadOnly,this),this.parent.on(Et,this.onPaste,this))},e.prototype.updateReadOnly=function(){this.parent.readonly?(ye(this.parent.contentModule.getEditPanel(),{contenteditable:"false"}),ce([this.parent.element],"e-rte-readonly")):(ye(this.parent.contentModule.getEditPanel(),{contenteditable:"true"}),he([this.parent.element],"e-rte-readonly"))},e.prototype.onSelectionSave=function(){var e=this.contentRenderer.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)},e.prototype.onSelectionRestore=function(e){this.parent.isBlur=!1,this.contentRenderer.getEditPanel().focus(),(h(e.items)||e.items)&&this.saveSelection.restore()},e.prototype.onKeyDown=function(e){if(9===e.args.keyCode&&this.parent.enableTabKey){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),n=this.nodeSelectionObj.getParentNodeCollection(t);if("LI"!==n[0].nodeName&&!Ce(n[0],"li")&&!Ce(n[0],"table")||0!==t.startOffset)if(e.args.preventDefault(),e.args.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var r=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(),r,r,0,r.textContent.length),_n.Insert(this.contentRenderer.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else _n.Insert(this.contentRenderer.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()))}"space"!==e.args.action&&"enter"!==e.args.action||this.spaceLink(e.args)},e.prototype.onPaste=function(e){var t=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(e.text.match(t)){e.args.preventDefault();for(var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=(this.parent.formatter.editorManager.nodeSelection.save(n,this.parent.contentModule.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),i=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),o=e.text.split("\n"),a="",s=0;s<o.length;s++)if(""===o[s].trim())a+="<p><br></p>";else{for(var l="",d=!0,c=o[s].split(" "),p=0;p<c.length;p++)""===c[p].trim()?l+=d?"&nbsp;":" ":(d=!1,l+=c[p]+" ");a+="<p>"+l.trim()+"</p>"}var u=this.parent.createElement("div");u.innerHTML=a;var m=u.querySelectorAll("p");for(s=0;s<m.length;s++){var f=m[s].innerHTML.split(" "),g="";for(p=0;p<f.length;p++)f[p].match(r)||f[p].match(i)?g+='<a className="e-rte-anchor" href="'+f[p]+'" title="'+f[p]+'">'+f[p]+" </a>":g+=f[p]+" ";m[s].innerHTML=g.trim()}h(this.parent.pasteCleanupModule)?this.parent.executeCommand("insertHTML",u):e.callBack(u.innerHTML)}},e.prototype.spaceLink=function(e){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),n=this.nodeSelectionObj.getParentNodeCollection(t),r=t.startContainer.textContent.substr(0,t.endOffset),i=r.split(" "),o=i[i.length-1],a=t.startOffset-(r.length-i[i.length-1].length);o=o.slice(0,a);var s=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==n[0].nodeName&&o.match(s)){var l=this.nodeSelectionObj.save(t,this.parent.contentModule.getDocument()),d={url:o.indexOf("http")>-1?o:"http://"+o,selection:l,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),text:o,title:"",target:"_blank"};this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},e,d)}},e.prototype.instantiateRenderer=function(){this.renderFactory.addRenderer(Ct.Content,new ir(this.parent,this.locator))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.render),this.parent.off("model-changed",this.onPropertyChanged),this.parent.off("destroy",this.destroy),this.parent.off("keyDown",this.onKeyDown),this.parent.off("initial-load",this.instantiateRenderer),this.parent.off("selectAll",this.selectAll),this.parent.off("selectRange",this.selectRange),this.parent.off("getSelectedHtml",this.getSelectedHtml),this.parent.off("selection-save",this.onSelectionSave),this.parent.off("selection-restore",this.onSelectionRestore),this.parent.off("readOnlyMode",this.updateReadOnly),this.parent.off(Et,this.onPaste))},e.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(Ct.Content);var e=this.contentRenderer.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};if(h(this.parent.formatter)){var n=new rr({currentDocument:this.contentRenderer.getDocument(),element:e,options:t});this.parent.setProperties({formatter:n},!0)}else this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),t);this.parent.enableXhtml&&this.parent.notify("xhtmlValidation",{}),this.parent.notify("bind-on-end",{})},e.prototype.onPropertyChanged=function(e){if(!h(e.newProp.formatter)){var t=this.contentRenderer.getEditPanel(),n={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),n)}},e.prototype.getModuleName=function(){return"htmlEditor"},e.prototype.selectAll=function(){var e=function e(t,n){var r=[];for(n=n.firstChild;n;n=n.nextSibling)3===n.nodeType?r.push(n):r=r.concat(e(t,n));return r}(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)},e.prototype.selectRange=function(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(),e.range)},e.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString())},e}(),sr=function(){function e(e,t){this.isImgUploaded=!1,this.pageX=null,this.pageY=null,this.deletedImg=[],this.parent=e,this.rteID=e.element.id,this.rendererFactory=t.getService("rendererFactory"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("delete",this.deleteImg,this),this.parent.on("initial-end",this.afterRender,this),this.parent.on("destroy",this.removeEventListener,this))},e.prototype.removeEventListener=function(){if(!this.parent.isDestroyed){this.parent.off("delete",this.deleteImg),this.parent.off("initial-end",this.afterRender),this.parent.off("destroy",this.removeEventListener);var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.removeEventListener("drop",this.dragDrop.bind(this),!0),e.removeEventListener("dragstart",this.dragStart.bind(this),!0),e.removeEventListener("dragenter",this.dragEnter.bind(this),!0),e.removeEventListener("dragover",this.dragOver.bind(this),!0),h(this.contentModule)||(y.remove(this.contentModule.getEditPanel(),Pe.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off("checkUndoStack",this.undoStack),this.parent.insertImageSettings.resize&&(y.remove(this.parent.contentModule.getEditPanel(),Pe.touchStartEvent,this.resizeStart),y.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick)))}},e.prototype.afterRender=function(){this.contentModule=this.rendererFactory.getRenderer(Ct.Content),y.add(this.contentModule.getEditPanel(),Pe.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(y.add(this.parent.contentModule.getEditPanel(),Pe.touchStartEvent,this.resizeStart,this),y.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this));var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.addEventListener("drop",this.dragDrop.bind(this),!0),e.addEventListener("dragstart",this.dragStart.bind(this),!0),e.addEventListener("dragenter",this.dragOver.bind(this),!0),e.addEventListener("dragover",this.dragOver.bind(this),!0)},e.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var n=this.parent.createElement("div"),r=(a=this.parent.formatter.getUndoRedoStack()[t].text,s=void 0,(s=de("template")).innerHTML=a,s.content instanceof DocumentFragment?s.content:document.createRange().createContextualFragment(a));n.appendChild(r);var i=n.querySelectorAll("img");if(n.querySelector(".e-img-resize")&&i.length>0){for(var o=0;o<i.length;o++)i[o].style.outline="";ge(n.querySelector(".e-img-resize")),this.parent.formatter.getUndoRedoStack()[t].text=n.innerHTML}}var a,s},e.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor="auto",Pe.isDevice&&he([e.target.parentElement],"e-mob-span");var t=g()?{requestType:"images"}:{event:e,requestType:"images"};this.parent.trigger("resizeStop",t);this.getPointX(e),this.parent.iframeSettings.enable?(window.pageYOffset,this.parent.element.getBoundingClientRect().top,e.clientY):e.pageY;this.parent.formatter.editorManager.observer.on("checkUndoStack",this.undoStack,this),this.parent.formatter.saveData()},e.prototype.resizeStart=function(e,t){var n=this;if(!this.parent.readonly){var r=t||e.target;if("IMG"===r.tagName){this.parent.preventDefaultResize(e);var i=r;this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&ge(this.imgResizeDiv),this.imageResize(i)}if(r.classList.contains("e-rte-imageboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.imageQTBar.hidePopup(),r.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),r.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),r.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),r.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),Pe.isDevice&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span"))ce([this.imgResizeDiv],"e-mob-span");else{var o=g()?{requestType:"images"}:{event:e,requestType:"images"};this.parent.trigger("resizeStart",o,(function(e){e.cancel&&n.cancelResizeAction()}))}y.add(this.contentModule.getDocument(),Pe.touchEndEvent,this.resizeEnd,this)}}},e.prototype.imageClick=function(e){Pe.isDevice&&("IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName||"IMG"===e.target.tagName?(this.contentModule.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.contentModule.getEditPanel().setAttribute("contenteditable","true")),"IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName&&e.preventDefault()},e.prototype.imageResize=function(e){this.resizeBtnInit(),this.imgEle=e,ce([this.imgEle],"e-resize"),this.imgResizeDiv=this.parent.createElement("span",{className:"e-img-resize",id:this.rteID+"_imgResize"}),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),Pe.isDevice&&ce([this.imgResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.imgResizePos(e,this.imgResizeDiv),this.resizeImgDupPos(e),this.contentModule.getEditPanel().appendChild(this.imgResizeDiv),y.add(this.contentModule.getDocument(),Pe.touchMoveEvent,this.resizing,this)},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},e.prototype.imgResizePos=function(e,t){var n=this.calcPos(e),r=n.top,i=n.left,o=e.width,a=e.height,s=Pe.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=Pe.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=i-s+"px",t.querySelector(".e-rte-botLeft").style.top=a-s+r+"px",t.querySelector(".e-rte-botRight").style.left=o-(s-l)+i+"px",t.querySelector(".e-rte-botRight").style.top=a-s+r+"px",t.querySelector(".e-rte-topRight").style.left=o-(s-l)+i+"px",t.querySelector(".e-rte-topRight").style.top=r-s+"px",t.querySelector(".e-rte-topLeft").style.left=i-s+"px",t.querySelector(".e-rte-topLeft").style.top=r-s+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},n=e.getBoundingClientRect(),r=e.ownerDocument,i=(e.offsetParent&&(e.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?Ce(e,"#"+this.parent.getID()+"_rte-edit-view"):e.offsetParent)||r.documentElement;i&&(i===r.body||i===r.documentElement)&&"static"===i.style.position;)i=i.parentNode;return i&&i!==e&&1===i.nodeType&&(t=i.getBoundingClientRect()),{top:n.top-t.top,left:n.left-t.left}},e.prototype.setAspectRatio=function(e,t,n){if(!h(e.width)){var r=""!==e.style.width?parseInt(e.style.width,10):e.width,i=""!==e.style.height?parseInt(e.style.height,10):e.height;r>i?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(r/i*n,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=r/i*n+"px",e.style.height=n+"px"):(e.setAttribute("width",(r/i*n).toString()),e.setAttribute("height",n.toString())):i>r?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=i/r*t+"px"):(e.setAttribute("width",t.toString()),e.setAttribute("height",(i/r*t).toString())):this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=t+"px"):(e.setAttribute("width",t.toString()),e.setAttribute("height",t.toString()))}},e.prototype.pixToPerc=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},e.prototype.imgDupMouseMove=function(e,t,n){var r=this,i=g()?{requestType:"images"}:{event:n,requestType:"images"};this.parent.trigger("resizing",i,(function(n){if(n.cancel)r.cancelResizeAction();else{if(parseInt(r.parent.insertImageSettings.minWidth,10)>=parseInt(e,10)||parseInt(r.parent.insertImageSettings.maxWidth,10)<=parseInt(e,10))return;if(!r.parent.insertImageSettings.resizeByPercent&&(parseInt(r.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(r.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10)))return;r.imgEle.parentElement.style.cursor="pointer",r.setAspectRatio(r.imgEle,parseInt(e,10),parseInt(t,10)),r.resizeImgDupPos(r.imgEle),r.imgResizePos(r.imgEle,r.imgResizeDiv),r.parent.setContentHeight("",!1)}}))},e.prototype.resizing=function(e){var t=this.getPointX(e),n=this.getPointY(e),r=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,i=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(n-this.pageY):n-this.pageY,o=parseInt(this.imgDupPos.width,10)+r,a=parseInt(this.imgDupPos.height,10)+i;this.pageX=t,this.pageY=n,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(o+"px",a+"px",e)},e.prototype.cancelResizeAction=function(){y.remove(this.contentModule.getDocument(),Pe.touchMoveEvent,this.resizing),y.remove(this.contentModule.getDocument(),Pe.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&(ge(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},e.prototype.resizeImgDupPos=function(e){this.imgDupPos={width:""!==e.style.height?this.imgEle.style.width:e.width+"px",height:""!==e.style.height?this.imgEle.style.height:e.height+"px"}},e.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},e.prototype.deleteImg=function(e){if("IMG"===e.selectNode[0].nodeName){var t={img:e.selectNode[0]};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.remvoeResizEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup(),this.cancelResizeAction(),this.parent.trigger("afterImageDelete",t)}},e.prototype.onDocumentClick=function(e){var t=e.target;"IMG"===t.nodeName&&(this.imgEle=t),!h(this.dialogObj)&&(!Ce(t,"#"+this.dialogObj.element.id)&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!Ce(t,"#"+this.parent.getID()+"_toolbar_Image")&&!t.querySelector("#"+this.parent.getID()+"_toolbar_Image"))&&(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,fn(this.parent.element,"focusout")),"IMG"===e.target.tagName||!this.imgResizeDiv||this.quickToolObj&&this.quickToolObj.imageQTBar&&this.quickToolObj.imageQTBar.element.contains(e.target)||!this.contentModule.getEditPanel().contains(this.imgResizeDiv)||this.cancelResizeAction(),"IMG"!==t.tagName&&this.contentModule.getEditPanel().querySelector(".e-img-resize")&&(this.remvoeResizEle(),this.contentModule.getEditPanel().querySelector("img").style.outline="")},e.prototype.remvoeResizEle=function(){y.remove(this.contentModule.getDocument(),Pe.touchMoveEvent,this.resizing),y.remove(this.contentModule.getDocument(),Pe.touchEndEvent,this.resizeEnd),ge(this.contentModule.getEditPanel().querySelector(".e-img-resize"))},e.prototype.dragStart=function(e){if("IMG"!==e.target.nodeName)return!0;this.parent.trigger("actionBegin",e,(function(t){t.cancel?e.preventDefault():(e.dataTransfer.effectAllowed="copyMove",e.target.classList.add("e-rte-drag-image"))}))},e.prototype.dragEnter=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()},e.prototype.dragOver=function(e){if(!("edge"===Pe.info.name&&e.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||Pe.isIE&&"Files"===e.dataTransfer.types[0]))return!0;e.preventDefault()},e.prototype.dragDrop=function(e){var t=this,n=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(!(n&&"IMG"===n.tagName||e.dataTransfer.files.length>0))return!0;this.parent.trigger("actionBegin",e,(function(n){if(n.cancel)e.preventDefault();else{if(Ce(e.target,"#"+t.parent.getID()+"_toolbar"))return void e.preventDefault();t.parent.element.querySelector(".e-img-resize")&&ge(t.imgResizeDiv),e.preventDefault();var r=void 0;if(t.contentModule.getDocument().caretRangeFromPoint?r=t.contentModule.getDocument().caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent?(r=t.contentModule.getDocument().createRange()).setStart(e.rangeParent,e.rangeOffset):r=t.getDropRange(e.clientX,e.clientY),t.parent.notify("selectRange",{range:r}),t.parent.element.querySelector(".e-droparea"))return;t.insertDragImage(e)}}))},e.prototype.getDropRange=function(e,t){var n=this.contentModule.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),n);var r=this.contentModule.getDocument().elementFromPoint(e,t),i=r.childNodes.length>0?r.childNodes[0]:r,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)n.setStart(i,o),n.setEnd(i,o);else{var a=void 0;do{o++,n.setStart(i,o),n.setEnd(i,o+1),a=n.getBoundingClientRect()}while(a.left<e&&o<i.length-1)}return n},e.prototype.insertDragImage=function(e){e.preventDefault();var t=this.parent.element.querySelector("e-popup-open");if(this.parent.notify("drop",{args:e}),t&&t.classList.add("e-hide"),e.dataTransfer.files.length>0);else{var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(r&&"IMG"===r.tagName){r.nextElementSibling&&r.nextElementSibling.classList.contains("e-img-inner")?n.insertNode(r.parentElement.parentElement):n.insertNode(r),r.classList.remove("e-rte-drag-image"),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());var i=e;this.resizeStart(i,r)}}},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return"image"},e}(),lr={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},dr=function(){function e(){}return e.get=function(e,t,n,r,i,o){for(var a=JSON.parse(JSON.stringify(lr)),s=JSON.parse(JSON.stringify(lr)),l=new Ln,d=o?[o]:l.getNodeCollection(l.getRange(e)),c=d.length,h=0;h<d.length;h++)("BR"!==d[h].nodeName&&3!==d[h].nodeType||c>1&&3===d[h].nodeType&&""===d[h].textContent.trim())&&(d.splice(h,1),h--);for(h=0;h<d.length;h++)a=this.getFormatParent(e,a,d[h],t,n,r,i),(0===h&&a.bold||!a.bold)&&(s.bold=a.bold),(0===h&&a.insertcode||!a.insertcode)&&(s.insertcode=a.insertcode),(0===h&&a.italic||!a.italic)&&(s.italic=a.italic),(0===h&&a.underline||!a.underline)&&(s.underline=a.underline),(0===h&&a.strikethrough||!a.strikethrough)&&(s.strikethrough=a.strikethrough),(0===h&&a.superscript||!a.superscript)&&(s.superscript=a.superscript),(0===h&&a.subscript||!a.subscript)&&(s.subscript=a.subscript),(0===h&&a.fontcolor||!a.fontcolor)&&(s.fontcolor=a.fontcolor),(0===h&&a.fontname||!a.fontname)&&(s.fontname=a.fontname),(0===h&&a.fontsize||!a.fontsize)&&(s.fontsize=a.fontsize),(0===h&&a.backgroundcolor||!a.backgroundcolor)&&(s.backgroundcolor=a.backgroundcolor),(0===h&&a.orderedlist||!a.orderedlist)&&(s.orderedlist=a.orderedlist),(0===h&&a.unorderedlist||!a.unorderedlist)&&(s.unorderedlist=a.unorderedlist),(0===h&&a.alignments||!a.alignments)&&(s.alignments=a.alignments),(0===h&&a.formats||!a.formats)&&(s.formats=a.formats),(0===h&&a.createlink||!a.createlink)&&(s.createlink=a.createlink),a=JSON.parse(JSON.stringify(lr));return s},e.getFormatParent=function(e,t,n,r,i,o,a){if(r.contains(n)||3===n.nodeType&&3!==r.nodeType&&r.contains(n.parentNode))do{t=this.isFormattedNode(e,t,n,i,o,a),n=n.parentNode}while(n&&n!==r);return t},e.isFormattedNode=function(e,t,n,r,i,o){return t.bold||(t.bold=Kn.isBold(n)),t.italic||(t.italic=Kn.isItalic(n)),t.underline||(t.underline=Kn.isUnderline(n)),t.strikethrough||(t.strikethrough=Kn.isStrikethrough(n)),t.superscript||(t.superscript=Kn.isSuperscript(n)),t.subscript||(t.subscript=Kn.isSubscript(n)),t.fontcolor||(t.fontcolor=this.isFontColor(e,n)),t.fontname||(t.fontname=this.isFontName(e,n,o)),t.fontsize||(t.fontsize=this.isFontSize(n,i)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(n)),t.orderedlist||(t.orderedlist=this.isOrderedList(n)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(n)),t.alignments||(t.alignments=this.isAlignment(n)),t.formats||(t.formats=this.isFormats(n,r),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(n)),t},e.isFontColor=function(e,t){var n=t.style&&t.style.color;return null!=n&&""!==n||3===t.nodeType||(n=this.getComputedStyle(e,t,"color")),null!==n&&""!==n&&void 0!==n?n:null},e.isLink=function(e){return"a"===e.nodeName.toLocaleLowerCase()},e.isBackgroundColor=function(e){var t=e.style&&e.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null},e.isFontSize=function(e,t){var n=e.style&&e.style.fontSize;return null!==n&&""!==n&&void 0!==n&&(null==t||t.indexOf(n)>-1)?n:null},e.isFontName=function(e,t,n){var r=t.style&&t.style.fontFamily;null!=r&&""!==r||3===t.nodeType||(r=this.getComputedStyle(e,t,"font-family"));var i=null;return null!==r&&""!==r&&void 0!==r&&(null==n||n.filter((function(e,t){var n=new RegExp(r,"i");(e.replace(/"/g,"").replace(/ /g,"")===r.replace(/"/g,"").replace(/ /g,"")||e.search(n)>-1)&&(i=t)}))&&null!==i)?null!==i?n[i]:r.replace(/"/g,""):null},e.isOrderedList=function(e){return"ol"===e.nodeName.toLocaleLowerCase()},e.isUnorderedList=function(e){return"ul"===e.nodeName.toLocaleLowerCase()},e.isAlignment=function(e){var t=e.style&&e.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null},e.isFormats=function(e,t){return null==t&&wn.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null},e.getComputedStyle=function(e,t,n){return e.defaultView.getComputedStyle(t,null).getPropertyValue(n)},e}();Mn.Inject(ar,sr);var cr={};cr.RichTextEditor=Mn,cr.HtmlEditor=ar,cr.Image=sr,cr.ToolbarStatus=dr;var hr={richtexteditor:cr};window.ejs=hr,window.ej=hr}});